<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Introdução ao TDD para Novos Desenvolvedores | DigitalSys Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://oedudev.github.io/docs-preview/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://oedudev.github.io/docs-preview/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://oedudev.github.io/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Introdução ao TDD para Novos Desenvolvedores | DigitalSys Docs"><meta data-rh="true" name="description" content="Introdução: Por que começar pelos testes?"><meta data-rh="true" property="og:description" content="Introdução: Por que começar pelos testes?"><link data-rh="true" rel="icon" href="/docs-preview/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://oedudev.github.io/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores"><link data-rh="true" rel="alternate" href="https://oedudev.github.io/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores" hreflang="en"><link data-rh="true" rel="alternate" href="https://oedudev.github.io/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Introdução ao TDD para Novos Desenvolvedores","item":"https://oedudev.github.io/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores"}]}</script><link rel="alternate" type="application/rss+xml" href="/docs-preview/blog/rss.xml" title="DigitalSys Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs-preview/blog/atom.xml" title="DigitalSys Docs Atom Feed"><link rel="stylesheet" href="/docs-preview/assets/css/styles.9c53a5ce.css">
<script src="/docs-preview/assets/js/runtime~main.6be716e5.js" defer="defer"></script>
<script src="/docs-preview/assets/js/main.4b2c6578.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docs-preview/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs-preview/"><div class="navbar__logo"><img src="/docs-preview/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs-preview/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-preview/docs/base-de-conhecimento/onboarding/boas-praticas/boas-praticas-de-codigo">Documentação</a><a class="navbar__item navbar__link" href="/docs-preview/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs-preview/docs/base-de-conhecimento/onboarding/boas-praticas/boas-praticas-de-codigo"><span title="base-de-conhecimento" class="categoryLinkLabel_W154">base-de-conhecimento</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/boas-praticas/boas-praticas-de-codigo"><span title="onboarding" class="categoryLinkLabel_W154">onboarding</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/boas-praticas/boas-praticas-de-codigo"><span title="boas-praticas" class="categoryLinkLabel_W154">boas-praticas</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/primeiros-passos/onboarding"><span title="primeiros-passos" class="categoryLinkLabel_W154">primeiros-passos</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/guia-para-evitar-overfetch-e-underfetch-em-projetos"><span title="treinamento-tecnico" class="categoryLinkLabel_W154">treinamento-tecnico</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/guia-para-evitar-overfetch-e-underfetch-em-projetos"><span title="Guia para Evitar Overfetch e Underfetch em Projetos" class="linkLabel_WmDU">Guia para Evitar Overfetch e Underfetch em Projetos</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores"><span title="Introdução ao TDD para Novos Desenvolvedores" class="linkLabel_WmDU">Introdução ao TDD para Novos Desenvolvedores</span></a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-preview/docs/manual-do-dev/ai-agents/manual-bots"><span title="manual-do-dev" class="categoryLinkLabel_W154">manual-do-dev</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs-preview/docs/manual-do-devops/agentes-ia/arquitetura"><span title="manual-do-devops" class="categoryLinkLabel_W154">manual-do-devops</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs-preview/docs/boas-praticas-limpo"><span title="Boas Práticas de Código" class="linkLabel_WmDU">Boas Práticas de Código</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs-preview/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">base-de-conhecimento</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">onboarding</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">treinamento-tecnico</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Introdução ao TDD para Novos Desenvolvedores</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introdução ao TDD para Novos Desenvolvedores</h1></header>
<h1>Manual de Desenvolvimento Guiado por Testes (TDD) para Novos Desenvolvedores</h1>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="introdução-por-que-começar-pelos-testes">Introdução: Por que começar pelos testes?<a href="#introdução-por-que-começar-pelos-testes" class="hash-link" aria-label="Direct link to Introdução: Por que começar pelos testes?" title="Direct link to Introdução: Por que começar pelos testes?" translate="no">​</a></h2>
<p>Olá, novo(a) desenvolvedor(a)! Bem-vindo(a) à nossa equipe. Uma das práticas fundamentais que valorizamos e que fará uma grande diferença na qualidade do seu código e na sua produtividade é o <strong>Desenvolvimento Guiado por Testes</strong>, ou <strong>TDD</strong> (do inglês, Test-Driven Development).</p>
<p>Sabemos que, no início, a ideia de escrever testes <em>antes</em> de escrever o código da funcionalidade pode parecer contraintuitiva ou até mesmo um passo extra que atrasa a entrega. Muitos se perguntam: &quot;Como posso testar algo que ainda não existe?&quot;. Este manual tem como objetivo desmistificar o TDD, mostrar sua importância e, o mais importante, fornecer um guia prático – uma &quot;receita de bolo&quot; – para você começar a desenvolver suas features pensando em testabilidade desde o primeiro momento, especialmente utilizando Golang e o VS Code.</p>
<p>O foco aqui será em como o TDD pode transformar a maneira como você pensa sobre o design do seu código, tornando-o mais robusto, manutenível e, surpreendentemente, mais rápido de desenvolver a longo prazo. Vamos abordar como convencer você de que iniciar pelos testes não é um fardo, mas uma ferramenta poderosa para construir software de alta qualidade, com ênfase em como lidar com dependências comuns como bancos de dados e filas através de mocks, e a diferença crucial entre testes unitários e de integração.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="o-que-é-tdd-desenvolvimento-guiado-por-testes">O que é TDD (Desenvolvimento Guiado por Testes)?<a href="#o-que-é-tdd-desenvolvimento-guiado-por-testes" class="hash-link" aria-label="Direct link to O que é TDD (Desenvolvimento Guiado por Testes)?" title="Direct link to O que é TDD (Desenvolvimento Guiado por Testes)?" translate="no">​</a></h2>
<p>O Desenvolvimento Guiado por Testes (TDD) é uma abordagem de desenvolvimento de software onde os desenvolvedores escrevem testes automatizados <em>antes</em> de escrever o código de produção que implementa a funcionalidade desejada. Parece estranho à primeira vista, mas essa inversão de processo traz inúmeros benefícios.</p>
<p>A essência do TDD reside em um ciclo curto e repetitivo, conhecido como o ciclo <strong>Red-Green-Refactor</strong>:</p>
<ol>
<li class="">
<p><strong>Red (Vermelho):</strong> Escreva um teste automatizado para uma pequena funcionalidade ou parte dela. Como o código da funcionalidade ainda não existe, este teste irá falhar (ficará &quot;vermelho&quot;). Este passo é crucial, pois ele define claramente o que você espera que seu código faça. Se o teste não falhar inicialmente, ele pode não estar testando o que você pensa, ou a funcionalidade já existe de alguma forma.</p>
</li>
<li class="">
<p><strong>Green (Verde):</strong> Escreva a quantidade mínima de código de produção necessária para fazer o teste passar (ficar &quot;verde&quot;). Neste momento, o objetivo não é escrever o código mais elegante ou otimizado, mas sim o código mais simples que satisfaça o teste. O foco é fazer o teste passar rapidamente.</p>
</li>
<li class="">
<p><strong>Refactor (Refatorar):</strong> Com o teste passando e garantindo que a funcionalidade está correta, agora você pode refatorar o código de produção com segurança. Refatorar significa melhorar a estrutura interna do código (torná-lo mais limpo, legível, eficiente, remover duplicação) sem alterar seu comportamento externo. Como você tem um teste que garante o comportamento, você pode fazer essas melhorias com a confiança de que não quebrará a funcionalidade.</p>
</li>
</ol>
<p>Após a refatoração, o ciclo se repete para a próxima pequena funcionalidade ou melhoria. O TDD, portanto, não é apenas sobre testar; é uma disciplina de design que guia o desenvolvimento do software de forma incremental e segura.</p>
<p><strong>Pensando a Aplicação de Modo Testável desde o Início:</strong></p>
<p>Adotar o TDD força você a pensar sobre como sua funcionalidade será usada e como ela se comportará antes mesmo de você escrever uma linha de código de implementação. Isso leva a um design de software mais claro e modular. Ao escrever o teste primeiro, você está, na verdade, especificando a interface e o comportamento esperado do seu código. Se é difícil escrever um teste para uma determinada peça de código, isso geralmente é um sinal de que o design dessa peça de código pode ser complexo demais ou mal acoplado, incentivando você a simplificá-lo.</p>
<p>Nos próximos capítulos, exploraremos por que essa abordagem é tão importante e como aplicá-la na prática com Golang.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="por-que-tdd-é-importante">Por que TDD é Importante?<a href="#por-que-tdd-é-importante" class="hash-link" aria-label="Direct link to Por que TDD é Importante?" title="Direct link to Por que TDD é Importante?" translate="no">​</a></h2>
<p>Agora que entendemos o <em>que é</em> TDD e seu ciclo básico, você pode estar se perguntando: &quot;Ok, mas por que devo me dar ao trabalho? Quais são os reais benefícios?&quot;</p>
<p>A importância do TDD vai muito além de simplesmente &quot;ter testes&quot;. Ele impacta positivamente diversas áreas do desenvolvimento de software:</p>
<ol>
<li class="">
<p><strong>Melhora o Design do Código:</strong></p>
<ul>
<li class=""><strong>Acoplamento Baixo e Coesão Alta:</strong> Ao escrever testes primeiro, você é forçado a pensar em como seu código será utilizado. Isso naturalmente leva a componentes menores, mais focados (alta coesão) e com dependências bem definidas e gerenciáveis (baixo acoplamento). Se é difícil testar uma unidade de código, geralmente é um sinal de que ela está fazendo coisas demais ou está muito entrelaçada com outras partes do sistema.</li>
<li class=""><strong>Interfaces Claras:</strong> O teste atua como o primeiro cliente do seu código. Para testá-lo, você precisa de uma interface clara e bem definida. Isso resulta em APIs internas mais limpas e fáceis de usar.</li>
</ul>
</li>
<li class="">
<p><strong>Reduz Bugs e Aumenta a Confiança:</strong></p>
<ul>
<li class=""><strong>Segurança para Refatorar:</strong> Como mencionado, o conjunto de testes automatizados atua como uma rede de segurança. Você pode refatorar e melhorar seu código com a confiança de que, se algo quebrar, os testes irão alertá-lo imediatamente. Isso encoraja melhorias contínuas no código sem o medo de introduzir regressões.</li>
<li class=""><strong>Detecção Antecipada de Erros:</strong> Bugs são encontrados muito mais cedo no ciclo de desenvolvimento (geralmente minutos após a escrita do código), quando são mais fáceis e baratos de corrigir.</li>
<li class=""><strong>Documentação Viva:</strong> Os testes servem como uma forma de documentação executável. Eles descrevem como cada parte do sistema deve se comportar e como ela deve ser usada. Ao contrário da documentação tradicional, que pode ficar desatualizada, os testes estão sempre sincronizados com o código (ou eles falham).</li>
</ul>
</li>
<li class="">
<p><strong>Desenvolvimento Mais Rápido (a Longo Prazo):</strong></p>
<ul>
<li class="">Pode parecer que escrever testes primeiro torna o desenvolvimento mais lento, mas essa percepção geralmente é de curto prazo. A longo prazo, o tempo economizado na depuração, na correção de bugs em produção e na facilidade de manutenção e extensão do código compensa largamente o investimento inicial na escrita dos testes.</li>
<li class=""><strong>Feedback Rápido:</strong> O ciclo curto do TDD fornece feedback constante sobre o progresso e a corretude do seu trabalho.</li>
</ul>
</li>
<li class="">
<p><strong>Simplifica a Depuração:</strong></p>
<ul>
<li class="">Quando um teste falha após uma alteração no código, você sabe exatamente qual funcionalidade foi afetada e, geralmente, a causa raiz do problema está no código que você acabou de escrever ou modificar. Isso torna a depuração muito mais direcionada e rápida.</li>
</ul>
</li>
<li class="">
<p><strong>Foco no Requisito:</strong></p>
<ul>
<li class="">Cada teste é escrito para satisfazer uma pequena parte de um requisito. Isso ajuda a manter o foco no que realmente precisa ser implementado, evitando a superengenharia ou a adição de funcionalidades desnecessárias.</li>
</ul>
</li>
<li class="">
<p><strong>Facilita a Colaboração e o Onboarding:</strong></p>
<ul>
<li class="">Um código bem testado é mais fácil para outros desenvolvedores (incluindo você no futuro ou novos membros da equipe) entenderem e modificarem com segurança.</li>
</ul>
</li>
</ol>
<p><strong>Convencendo Você a Iniciar pelos Testes:</strong></p>
<p>A maior barreira para iniciantes é, muitas vezes, a mudança de mentalidade. Em vez de ver os testes como uma tarefa separada e posterior, o TDD os integra ao processo de design e escrita do código. Pense nos testes como especificações executáveis do comportamento que você deseja. Ao escrever o teste primeiro, você está definindo o &quot;contrato&quot; que seu código deve cumprir.</p>
<p>Nos próximos capítulos, vamos mergulhar em como colocar isso em prática com Golang, mostrando como essa &quot;receita de bolo&quot; pode ser aplicada para construir funcionalidades de forma incremental e segura, e como isso ajuda a pensar em um design testável desde o início.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="como-desenvolver-baseado-em-testes-com-golang-e-vs-code-a-receita-de-bolo">Como Desenvolver Baseado em Testes com Golang e VS Code (A &quot;Receita de Bolo&quot;)<a href="#como-desenvolver-baseado-em-testes-com-golang-e-vs-code-a-receita-de-bolo" class="hash-link" aria-label="Direct link to Como Desenvolver Baseado em Testes com Golang e VS Code (A &quot;Receita de Bolo&quot;)" title="Direct link to Como Desenvolver Baseado em Testes com Golang e VS Code (A &quot;Receita de Bolo&quot;)" translate="no">​</a></h2>
<p>Chegou a hora de colocar a mão na massa! Esta seção é o coração do nosso manual e vai guiar você, passo a passo, em como aplicar o TDD no seu dia a dia com Golang e o Visual Studio Code (VS Code), nosso editor padrão.</p>
<p>Lembre-se do ciclo: <strong>RED</strong> (escrever um teste que falha) -&gt; <strong>GREEN</strong> (escrever o código mínimo para o teste passar) -&gt; <strong>REFACTOR</strong> (melhorar o código).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="preparando-o-ambiente-go-e-vs-code">Preparando o Ambiente (Go e VS Code)<a href="#preparando-o-ambiente-go-e-vs-code" class="hash-link" aria-label="Direct link to Preparando o Ambiente (Go e VS Code)" title="Direct link to Preparando o Ambiente (Go e VS Code)" translate="no">​</a></h3>
<p>Antes de começarmos, garanta que você tem:</p>
<ol>
<li class=""><strong>Go Instalado:</strong> Se ainda não tem, siga as instruções no <a href="https://golang.org/doc/install" target="_blank" rel="noopener noreferrer" class="">site oficial do Go</a>. Após a instalação, configure seu <code>GOPATH</code> e <code>GOROOT</code> corretamente (as versões mais recentes do Go simplificam bastante isso com Go Modules, que usaremos).</li>
<li class=""><strong>VS Code Instalado:</strong> Baixe e instale o <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer" class="">VS Code</a>.</li>
<li class=""><strong>Extensão Go para VS Code:</strong> Dentro do VS Code, vá até a aba de Extensões (Ctrl+Shift+X ou Cmd+Shift+X) e procure por &quot;Go&quot; (geralmente a publicada pela equipe do Go na Microsoft). Instale-a. Esta extensão oferece excelente suporte para desenvolvimento Go, incluindo integração com ferramentas de teste, depuração, autocompletar, etc.<!-- -->
<ul>
<li class="">Após instalar a extensão, o VS Code pode pedir para instalar ferramentas adicionais do Go (como <code>gopls</code> para o language server, <code>dlv</code> para depuração, <code>go-outline</code>, etc.). Permita a instalação dessas ferramentas clicando em &quot;Install All&quot; quando solicitado.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="nosso-primeiro-exemplo-uma-função-de-soma-simples">Nosso Primeiro Exemplo: Uma Função de Soma Simples<a href="#nosso-primeiro-exemplo-uma-função-de-soma-simples" class="hash-link" aria-label="Direct link to Nosso Primeiro Exemplo: Uma Função de Soma Simples" title="Direct link to Nosso Primeiro Exemplo: Uma Função de Soma Simples" translate="no">​</a></h3>
<p>Vamos criar uma funcionalidade muito básica: uma função que soma dois números inteiros. Parece trivial, mas é perfeito para ilustrar o ciclo TDD.</p>
<p><strong>Passo 0: Estrutura do Projeto</strong></p>
<p>Crie uma nova pasta para o seu projeto, por exemplo, <code>meuprojeto_tdd</code>.
Abra esta pasta no VS Code (<code>File &gt; Open Folder...</code>).</p>
<p>Dentro desta pasta, crie um arquivo chamado <code>soma.go</code> e um arquivo de teste chamado <code>soma_test.go</code>. Em Go, os arquivos de teste devem terminar com <code>_test.go</code> e ficar no mesmo pacote (mesma pasta, geralmente) que o código que estão testando.</p>
<p>Inicialize o Go Modules no terminal integrado do VS Code (<code>View &gt; Terminal</code>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go mod init meuprojeto_tdd</span><br></span></code></pre></div></div>
<p>Isso criará um arquivo <code>go.mod</code>.</p>
<p><strong>Passo 1: RED - Escreva um Teste que Falha</strong></p>
<p>Abra o arquivo <code>soma_test.go</code> e adicione o seguinte código:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main </span><span class="token comment" style="color:#999988;font-style:italic">// Ou o nome do seu pacote</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;testing&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestSoma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    resultado </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Soma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    esperado </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> resultado </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> esperado </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Soma(2, 2) = %d; esperado %d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resultado</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> esperado</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Entendendo o Teste:</strong></p>
<ul>
<li class=""><code>package main</code>: Declara que este arquivo pertence ao pacote <code>main</code>. Se você estiver criando uma biblioteca, usaria um nome de pacote diferente (e o <code>soma.go</code> também estaria nesse pacote).</li>
<li class=""><code>import &quot;testing&quot;</code>: Importa o pacote <code>testing</code> nativo do Go, que fornece as ferramentas para escrever testes automatizados.</li>
<li class=""><code>func TestSoma(t *testing.T)</code>: Esta é a função de teste. Em Go, funções de teste devem começar com a palavra <code>Test</code> seguida por um nome que descreva o que está sendo testado (aqui, <code>Soma</code>). Elas devem receber um único argumento do tipo <code>*testing.T</code>.</li>
<li class=""><code>resultado := Soma(2, 2)</code>: Chamamos nossa função <code>Soma</code> (que ainda não existe!) com os valores 2 e 2.</li>
<li class=""><code>esperado := 4</code>: Definimos o resultado que esperamos.</li>
<li class=""><code>if resultado != esperado</code>: Comparamos o resultado obtido com o esperado.</li>
<li class=""><code>t.Errorf(&quot;Soma(2, 2) = %d; esperado %d&quot;, resultado, esperado)</code>: Se o resultado for diferente do esperado, <code>t.Errorf</code> é chamado. Isso marca o teste como falho e registra a mensagem de erro formatada.</li>
</ul>
<p><strong>Rodando o Teste (e Vendo Falhar):</strong></p>
<p>No terminal do VS Code, dentro da pasta do projeto, execute:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go test</span><br></span></code></pre></div></div>
<p>Você verá um erro de compilação, algo como:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># meuprojeto_tdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./soma_test.go:6:14: undefined: Soma</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FAIL    meuprojeto_tdd [build failed]</span><br></span></code></pre></div></div>
<p>Perfeito! O teste está &quot;vermelho&quot; porque a função <code>Soma</code> nem sequer existe. Este é o primeiro tipo de falha que esperamos: o código não compila.</p>
<p><strong>Passo 2: GREEN - Escreva o Código Mínimo para o Teste Passar</strong></p>
<p>Agora, abra o arquivo <code>soma.go</code> e adicione a definição mais simples possível da função <code>Soma</code> para fazer o teste compilar e, idealmente, passar:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Soma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Comece com algo que compile, mesmo que errado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Salve o arquivo e rode <code>go test</code> novamente:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--- FAIL: TestSoma (0.00s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    soma_test.go:10: Soma(2, 2) = 0; esperado 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FAIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exit status 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FAIL    meuprojeto_tdd  0.001s</span><br></span></code></pre></div></div>
<p>Agora o código compila, mas o teste ainda falha (vermelho), porque <code>Soma(2,2)</code> retorna <code>0</code>, mas esperávamos <code>4</code>. Isso é bom, significa que nosso teste está verificando o comportamento correto.</p>
<p>Vamos corrigir a função <code>Soma</code> para que ela faça o que o teste espera:</p>
<p>No <code>soma.go</code>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Soma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> a </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> b </span><span class="token comment" style="color:#999988;font-style:italic">// A implementação correta e mínima</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Salve e rode <code>go test</code> novamente:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PASS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ok      meuprojeto_tdd  0.001s</span><br></span></code></pre></div></div>
<p>Sucesso! O teste passou. Estamos no &quot;verde&quot;.</p>
<p><strong>Passo 3: REFACTOR - Melhore o Código (se necessário)</strong></p>
<p>Neste exemplo simples, a função <code>Soma</code> já está bem clara e concisa. Não há muito o que refatorar no código de produção. No entanto, poderíamos pensar em melhorar o teste.</p>
<p>Por exemplo, e se quiséssemos testar mais alguns casos?</p>
<p>No <code>soma_test.go</code>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;testing&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestSoma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    testes </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> esperado </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tt </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> testes </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        resultado </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Soma</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> resultado </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">esperado </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Soma(%d, %d) = %d; esperado %d&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> resultado</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> tt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">esperado</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Esta é uma técnica comum em Go chamada &quot;table-driven tests&quot; (testes orientados a tabelas). Definimos uma série de casos de teste (entradas e saídas esperadas) e iteramos sobre eles.</p>
<p>Rode <code>go test</code> novamente para garantir que tudo continua passando:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PASS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ok      meuprojeto_tdd  0.001s</span><br></span></code></pre></div></div>
<p>Excelente! Refatoramos nosso teste para cobrir mais cenários, e ele continua verde.</p>
<p><strong>Integração com VS Code:</strong></p>
<p>A extensão Go para VS Code oferece ótimas integrações:</p>
<ul>
<li class=""><strong>&quot;Run test&quot; e &quot;Debug test&quot; Code Lenses:</strong> Acima das suas funções <code>TestXxx</code>, você verá pequenos links de texto &quot;run test&quot; e &quot;debug test&quot;. Clicar neles executa ou depura o teste específico.</li>
<li class=""><strong>Test Explorer:</strong> Na barra lateral do VS Code, há um ícone de frasco de Erlenmeyer (🧪). Ele abre o Test Explorer, que descobre e lista seus testes, permitindo que você os execute individualmente ou todos de uma vez, e veja os resultados visualmente.</li>
<li class=""><strong>Geração de Testes Unitários:</strong> O VS Code pode ajudar a gerar esqueletos de testes. Se você tiver uma função <code>MinhaFuncao</code> em <code>meuarquivo.go</code>, pode clicar com o botão direito sobre ela e procurar por opções como &quot;Go: Generate Unit Tests for Function&quot;.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pensando-a-aplicação-de-modo-testável-como-começar-uma-feature-pelos-testes">Pensando a Aplicação de Modo Testável: Como Começar uma Feature pelos Testes<a href="#pensando-a-aplicação-de-modo-testável-como-começar-uma-feature-pelos-testes" class="hash-link" aria-label="Direct link to Pensando a Aplicação de Modo Testável: Como Começar uma Feature pelos Testes" title="Direct link to Pensando a Aplicação de Modo Testável: Como Começar uma Feature pelos Testes" translate="no">​</a></h3>
<p>O exemplo da soma é simples. Como aplicar isso a uma feature mais complexa?</p>
<ol>
<li class="">
<p><strong>Entenda o Requisito Mínimo:</strong> Qual é a menor parte da funcionalidade que você pode implementar e testar? Não tente construir tudo de uma vez.</p>
</li>
<li class="">
<p><strong>Defina a Interface (Mentalmente ou no Teste):</strong> Como você, como usuário dessa nova funcionalidade (ou o código que a chamará), espera interagir com ela? Quais entradas ela receberá? O que ela deve retornar? Quais efeitos colaterais ela deve ter?</p>
</li>
<li class="">
<p><strong>Escreva o Teste para o Caso Mais Simples (ou um Caso de Borda):</strong></p>
<ul>
<li class=""><strong>Exemplo:</strong> Se você está criando uma função que valida um email:<!-- -->
<ul>
<li class="">Teste 1 (RED): <code>TestValidaEmail_ComEmailValido</code> - Chame <code>ValidaEmail(&quot;teste@exemplo.com&quot;)</code> e espere <code>true</code> (ou nenhum erro).</li>
<li class="">Implemente o mínimo em <code>ValidaEmail</code> para isso passar (GREEN).</li>
<li class="">Refatore (REFACTOR).</li>
<li class="">Teste 2 (RED): <code>TestValidaEmail_ComEmailInvalidoSemArroba</code> - Chame <code>ValidaEmail(&quot;testeexemplo.com&quot;)</code> e espere <code>false</code> (ou um erro específico).</li>
<li class="">Altere <code>ValidaEmail</code> para fazer este novo teste passar, sem quebrar o anterior (GREEN).</li>
<li class="">Refatore (REFACTOR).</li>
<li class="">Continue com outros casos: email sem ponto, email com caracteres especiais inválidos, etc.</li>
</ul>
</li>
</ul>
</li>
<li class="">
<p><strong>Construa a Funcionalidade Incrementalmente:</strong> Cada ciclo Red-Green-Refactor adiciona um pequeno pedaço do comportamento esperado. Os testes guiam o design e a implementação.</p>
</li>
</ol>
<p><strong>Por que isso ajuda a pensar de modo testável?</strong></p>
<ul>
<li class=""><strong>Foco no Comportamento:</strong> Você define o <em>o quê</em> antes do <em>como</em>.</li>
<li class=""><strong>Isolamento:</strong> Para testar uma unidade de código, ela precisa ser razoavelmente isolada. Se sua função faz 10 coisas diferentes e depende de 5 outras partes complexas do sistema que não podem ser facilmente controladas no teste, você naturalmente será incentivado a quebrar essa função em partes menores e mais gerenciáveis, cada uma com seus próprios testes.</li>
<li class=""><strong>Dependências Explícitas:</strong> Ao tentar escrever um teste, você rapidamente percebe quais são as dependências externas da sua unidade de código (outros pacotes, serviços, bancos de dados). Isso o força a pensar em como fornecer essas dependências de uma forma que possa ser controlada durante o teste (o que nos levará ao tópico de mocks).</li>
</ul>
<p>Esta &quot;receita de bolo&quot; é o ponto de partida. A prática levará à maestria. No próximo capítulo, vamos abordar como lidar com dependências externas, como bancos de dados e chamadas de API, usando mocks e stubs, um aspecto crucial para manter seus testes unitários rápidos e confiáveis.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lidando-com-dependências-externas-mocks-e-stubs">Lidando com Dependências Externas: Mocks e Stubs<a href="#lidando-com-dependências-externas-mocks-e-stubs" class="hash-link" aria-label="Direct link to Lidando com Dependências Externas: Mocks e Stubs" title="Direct link to Lidando com Dependências Externas: Mocks e Stubs" translate="no">​</a></h2>
<p>No mundo real, suas funções raramente vivem isoladas. Elas frequentemente interagem com dependências externas, como bancos de dados, APIs de terceiros, sistemas de arquivos, filas de mensagens, ou até mesmo outras partes do seu próprio sistema que são complexas demais para serem incluídas em um teste unitário.</p>
<p>É aqui que entram os <strong>Mocks</strong> e <strong>Stubs</strong>, técnicas essenciais para manter seus testes unitários focados, rápidos e confiáveis. O TDD incentiva o uso dessas técnicas porque, ao escrever o teste primeiro, você é forçado a pensar em como isolar a unidade de código que está testando.</p>
<p><strong>Por que precisamos isolar dependências?</strong></p>
<ul>
<li class=""><strong>Rapidez:</strong> Testes unitários devem ser rápidos. Se cada teste precisar se conectar a um banco de dados real ou fazer uma chamada de rede, eles se tornarão lentos e impraticáveis para rodar com frequência.</li>
<li class=""><strong>Confiabilidade (Determinismo):</strong> Testes devem produzir o mesmo resultado toda vez que são executados, dado o mesmo código. Dependências externas podem introduzir variabilidade (o banco de dados pode estar offline, a API pode retornar um erro inesperado, dados podem mudar).</li>
<li class=""><strong>Foco:</strong> Um teste unitário deve testar <em>apenas uma unidade</em> de código. Se o teste falha, você deve saber que o problema está na unidade testada, e não em uma de suas dependências.</li>
<li class=""><strong>Facilidade de Simular Cenários:</strong> É mais fácil simular comportamentos específicos de uma dependência (como um erro de banco de dados ou uma resposta específica de uma API) usando um mock do que tentando configurar o ambiente real para esses cenários.</li>
</ul>
<p><strong>O que são Mocks e Stubs?</strong></p>
<p>Embora os termos sejam às vezes usados de forma intercambiável, há uma distinção sutil:</p>
<ul>
<li class="">
<p><strong>Stubs:</strong> Fornecem respostas pré-definidas para chamadas feitas durante o teste. Eles são usados quando você não precisa verificar as interações com a dependência, apenas garantir que sua unidade de código se comporta corretamente com as respostas fornecidas pelo stub. Por exemplo, um stub de banco de dados pode sempre retornar um usuário específico quando solicitado.</p>
</li>
<li class="">
<p><strong>Mocks:</strong> São objetos que simulam o comportamento de dependências reais de uma forma controlada. Além de fornecerem respostas, os mocks também podem ser programados para <em>verificar as interações</em> que a unidade de código sob teste faz com eles. Por exemplo, um mock de um serviço de email pode verificar se o método <code>EnviarEmail</code> foi chamado com os parâmetros corretos.</p>
</li>
</ul>
<p>Em Go, frequentemente usamos interfaces para facilitar a criação de mocks e stubs. Se sua unidade de código depende de uma interface em vez de uma implementação concreta, você pode facilmente fornecer uma implementação falsa (um mock ou stub) durante os testes.</p>
<p><strong>Exemplo Prático: Mockando um Repositório de Banco de Dados em Go</strong></p>
<p>Imagine que temos um serviço que busca um usuário. Ele depende de um <code>RepositorioDeUsuarios</code> para interagir com o banco de dados.</p>
<p><strong>1. Defina a Interface da Dependência:</strong></p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// arquivo: repositorio_usuarios.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Usuario </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ID   </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nome </span><span class="token builtin">string</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// RepositorioDeUsuarios define as operações que esperamos de um repositório de usuários.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> RepositorioDeUsuarios </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">BuscarPorID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>2. Implemente o Serviço que Usa a Interface:</strong></p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// arquivo: servico_usuarios.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;fmt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ServicoDeUsuarios usa um RepositorioDeUsuarios para realizar suas operações.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> ServicoDeUsuarios </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    repo RepositorioDeUsuarios</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NovoServicoDeUsuarios cria uma nova instância de ServicoDeUsuarios.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NovoServicoDeUsuarios</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">r RepositorioDeUsuarios</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ServicoDeUsuarios </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">ServicoDeUsuarios</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">repo</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> r</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// EncontrarUsuario busca um usuário pelo ID usando o repositório.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">ServicoDeUsuarios</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">EncontrarUsuario</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">repo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">BuscarPorID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Poderíamos ter lógicas mais complexas aqui, como retornar um erro customizado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Usuario</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;serviço: usuário não encontrado: %w&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>3. Crie um Mock para <code>RepositorioDeUsuarios</code> no seu arquivo de teste:</strong></p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// arquivo: servico_usuarios_test.go</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;errors&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;testing&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MockRepositorioDeUsuarios é uma implementação mock da interface RepositorioDeUsuarios.	ype MockRepositorioDeUsuarios struct {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BuscarPorIDFunc </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Permite definir o comportamento do mock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// BuscarPorID implementa a interface para o mock.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">m </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">MockRepositorioDeUsuarios</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">BuscarPorID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">BuscarPorIDFunc </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> m</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">BuscarPorIDFunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Comportamento padrão se nenhuma função for definida (pode ser útil)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Usuario</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;mock: BuscarPorIDFunc não implementado&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestServicoEncontrarUsuario_Sucesso</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// RED: Definir o comportamento esperado do mock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockRepo </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">MockRepositorioDeUsuarios</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BuscarPorIDFunc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Usuario</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Nome</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Usuário Teste&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Usuario</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;usuário não encontrado no mock&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    servico </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NovoServicoDeUsuarios</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mockRepo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> servico</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncontrarUsuario</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// GREEN: Verificar o resultado</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Fatalf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Esperado nenhum erro, mas obteve: %v&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> usuario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Nome </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Usuário Teste&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Errorf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Nome do usuário esperado &#x27;Usuário Teste&#x27;, mas obteve &#x27;%s&#x27;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> usuario</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Nome</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// REFACTOR: O teste já está razoavelmente limpo.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TestServicoEncontrarUsuario_ErroRepositorio</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// RED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mockRepo </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">MockRepositorioDeUsuarios</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        BuscarPorIDFunc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Usuario</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> Usuario</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;erro simulado do repositório&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    servico </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NovoServicoDeUsuarios</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mockRepo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> servico</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncontrarUsuario</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">99</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// GREEN</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Fatal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Esperado um erro, mas não obteve nenhum&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Poderíamos verificar a mensagem de erro específica se quiséssemos</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// if !strings.Contains(err.Error(), &quot;erro simulado do repositório&quot;) { ... }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>Explicação do Mock:</strong></p>
<ul>
<li class=""><code>MockRepositorioDeUsuarios</code> implementa a interface <code>RepositorioDeUsuarios</code>.</li>
<li class=""><code>BuscarPorIDFunc</code> é um campo de função no mock. Isso nos permite injetar um comportamento específico para o método <code>BuscarPorID</code> em cada teste.</li>
<li class="">No teste <code>TestServicoEncontrarUsuario_Sucesso</code>, configuramos o mock para retornar um usuário específico quando <code>BuscarPorID(1)</code> é chamado.</li>
<li class="">No teste <code>TestServicoEncontrarUsuario_ErroRepositorio</code>, configuramos o mock para sempre retornar um erro.</li>
</ul>
<p>Esta abordagem, conhecida como <strong>Injeção de Dependência</strong> (passar as dependências para um objeto em vez de ele mesmo criá-las), é fundamental para a testabilidade e é naturalmente promovida pelo TDD.</p>
<p><strong>Ferramentas de Mock em Go:</strong></p>
<p>Embora mocks manuais como o acima sejam comuns e educativos, para interfaces mais complexas, você pode usar ferramentas que geram mocks automaticamente, como:</p>
<ul>
<li class=""><strong><code>gomock</code></strong> (do Google): Uma biblioteca popular para gerar mocks a partir de interfaces.</li>
<li class=""><strong><code>testify/mock</code></strong>: Parte da popular suíte <code>testify</code>, que também oferece muitas outras utilidades para testes.</li>
</ul>
<p>O VS Code geralmente tem boa integração com essas ferramentas se elas estiverem instaladas no seu ambiente Go.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="testes-unitários-vs-testes-de-integração-entendendo-a-diferença">Testes Unitários vs. Testes de Integração: Entendendo a Diferença<a href="#testes-unitários-vs-testes-de-integração-entendendo-a-diferença" class="hash-link" aria-label="Direct link to Testes Unitários vs. Testes de Integração: Entendendo a Diferença" title="Direct link to Testes Unitários vs. Testes de Integração: Entendendo a Diferença" translate="no">​</a></h3>
<p>Esta é uma distinção crucial, especialmente quando lidamos com dependências como bancos de dados e filas.</p>
<ul>
<li class="">
<p><strong>Testes Unitários:</strong></p>
<ul>
<li class=""><strong>Foco:</strong> Testam a menor unidade de código isoladamente (uma função, um método, uma classe/struct).</li>
<li class=""><strong>Dependências:</strong> Dependências externas são substituídas por mocks ou stubs.</li>
<li class=""><strong>Velocidade:</strong> Muito rápidos.</li>
<li class=""><strong>Escopo:</strong> Verificam a lógica interna da unidade.</li>
<li class=""><strong>Quando usar:</strong> Sempre! São a base da pirâmide de testes.</li>
<li class=""><strong>Exemplo:</strong> O teste do <code>ServicoDeUsuarios</code> com o <code>MockRepositorioDeUsuarios</code> é um teste unitário.</li>
</ul>
</li>
<li class="">
<p><strong>Testes de Integração:</strong></p>
<ul>
<li class=""><strong>Foco:</strong> Testam a interação entre duas ou mais unidades/componentes do sistema, ou entre seu sistema e uma dependência externa real (como um banco de dados ou uma API de terceiros).</li>
<li class=""><strong>Dependências:</strong> Usam dependências reais ou ambientes de teste que simulam de perto o real.</li>
<li class=""><strong>Velocidade:</strong> Mais lentos que os testes unitários.</li>
<li class=""><strong>Escopo:</strong> Verificam se os componentes se comunicam corretamente e se a integração com sistemas externos funciona como esperado.</li>
<li class=""><strong>Quando usar:</strong> Com moderação. São importantes para garantir que as &quot;costuras&quot; do seu sistema funcionam, mas não precisam cobrir todos os cenários que os testes unitários já cobrem.</li>
<li class=""><strong>Exemplo:</strong> Um teste que configura um banco de dados de teste real (por exemplo, um Docker container com PostgreSQL), insere dados, chama o <code>ServicoDeUsuarios</code> (que usa uma implementação real do <code>RepositorioDeUsuarios</code> que se conecta a este banco) e verifica se os dados corretos são retornados do banco.</li>
</ul>
</li>
</ul>
<p><strong>Por que a Diferença é Importante para Bancos de Dados e Filas?</strong></p>
<ul>
<li class=""><strong>Testes Unitários para a Lógica de Negócio:</strong> Sua lógica de negócio (o que acontece no <code>ServicoDeUsuarios</code>, por exemplo) deve ser testada unitariamente, mockando o acesso ao banco de dados ou à fila. Isso garante que sua lógica está correta independentemente da infraestrutura.</li>
<li class=""><strong>Testes de Integração para a Camada de Acesso a Dados/Filas:</strong> Você também precisará de alguns testes de integração para garantir que sua implementação real do <code>RepositorioDeUsuarios</code> consegue se comunicar corretamente com o banco de dados (queries SQL estão corretas, mapeamento de dados funciona) ou que seu produtor/consumidor de mensagens interage corretamente com a fila.</li>
</ul>
<p><strong>A Pirâmide de Testes:</strong></p>
<p>Pense em uma pirâmide:</p>
<ul>
<li class=""><strong>Base (Larga):</strong> Muitos Testes Unitários (rápidos, baratos, focados).</li>
<li class=""><strong>Meio:</strong> Menos Testes de Integração (mais lentos, mais caros).</li>
<li class=""><strong>Topo (Estreito):</strong> Pouquíssimos Testes End-to-End (E2E) ou de UI (os mais lentos e caros, testam o sistema todo como um usuário faria).</li>
</ul>
<p>O TDD foca principalmente na base e no meio dessa pirâmide.</p>
<p>Ao entender e aplicar mocks e a distinção entre tipos de teste, você estará bem equipado para construir aplicações Go robustas e testáveis, mesmo quando elas interagem com sistemas complexos.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="recursos-adicionais-links-úteis-tutoriais-e-vídeos-em-português">Recursos Adicionais: Links Úteis (Tutoriais e Vídeos em Português)<a href="#recursos-adicionais-links-úteis-tutoriais-e-vídeos-em-português" class="hash-link" aria-label="Direct link to Recursos Adicionais: Links Úteis (Tutoriais e Vídeos em Português)" title="Direct link to Recursos Adicionais: Links Úteis (Tutoriais e Vídeos em Português)" translate="no">​</a></h2>
<p>Para aprofundar seus conhecimentos em TDD, Golang e boas práticas de teste, selecionamos alguns recursos em português que podem ser muito úteis, especialmente para quem está começando:</p>
<p><strong>Conceitos Fundamentais de TDD:</strong></p>
<ol>
<li class="">
<p><strong>O que é TDD: descubra o que significa, como funciona e vantagens (YouTube - Didática Tech):</strong></p>
<ul>
<li class="">Link: <a href="https://www.youtube.com/watch?v=vFkc5VY-KW0" target="_blank" rel="noopener noreferrer" class="">https://www.youtube.com/watch?v=vFkc5VY-KW0</a></li>
<li class="">Descrição: Uma excelente introdução visual e conceitual ao TDD, explicando o ciclo Red-Green-Refactor e os benefícios da prática.</li>
</ul>
</li>
<li class="">
<p><strong>TDD: Test Driven Development ou Desenvolvimento Guiado por Testes (Medium - Manoel Camillo):</strong></p>
<ul>
<li class="">Link: <a href="https://medium.com/@manoelcamillo/tdd-test-driven-development-ou-desenvolvimento-guiado-por-testes-48f52a607694" target="_blank" rel="noopener noreferrer" class="">https://medium.com/@manoelcamillo/tdd-test-driven-development-ou-desenvolvimento-guiado-por-testes-48f52a607694</a></li>
<li class="">Descrição: Um artigo claro e conciso que aborda os fundamentos do TDD e sua importância no ciclo de desenvolvimento.</li>
</ul>
</li>
<li class="">
<p><strong>Test-driven development – Wikipédia, a enciclopédia livre:</strong></p>
<ul>
<li class="">Link: <a href="https://pt.wikipedia.org/wiki/Test-driven_development" target="_blank" rel="noopener noreferrer" class="">https://pt.wikipedia.org/wiki/Test-driven_development</a></li>
<li class="">Descrição: Para uma visão geral e histórica, a Wikipedia é sempre um bom ponto de partida.</li>
</ul>
</li>
</ol>
<p><strong>TDD com Golang (Tutoriais e Exemplos Práticos):</strong></p>
<ol>
<li class="">
<p><strong>Aprenda Go com Testes (GitBook - Tradução por Lari Teles e outros):</strong></p>
<ul>
<li class="">Link: <a href="https://larien.gitbook.io/aprenda-go-com-testes/" target="_blank" rel="noopener noreferrer" class="">https://larien.gitbook.io/aprenda-go-com-testes/</a></li>
<li class="">Descrição: Este é, possivelmente, <strong>o melhor recurso em português para aprender Go através do TDD</strong>. É um livro online completo, traduzido do famoso &quot;Learn Go with Tests&quot;. Ele guia você desde a instalação do Go até a criação de uma aplicação completa, sempre com foco em testes. Cobre desde o básico até concorrência, mocks, e muito mais. <strong>Altamente recomendado!</strong></li>
</ul>
</li>
<li class="">
<p><strong>The Go Show #3: Test Driven Development (TDD) in Go (YouTube - The Go Show):</strong></p>
<ul>
<li class="">Link: <a href="https://www.youtube.com/watch?v=yME2peeAxeE" target="_blank" rel="noopener noreferrer" class="">https://www.youtube.com/watch?v=yME2peeAxeE</a></li>
<li class="">Descrição: Embora o áudio principal seja em inglês, este canal costuma ter legendas e é uma boa demonstração prática de TDD em Go. Verifique a disponibilidade de legendas em português.</li>
</ul>
</li>
<li class="">
<p><strong>Golang: TDD na prática (YouTube - Full Cycle):</strong></p>
<ul>
<li class="">Link: (Pesquisar no YouTube por &quot;Full Cycle TDD Golang&quot; - os links diretos podem mudar, mas o canal Full Cycle tem excelentes conteúdos práticos sobre Go).</li>
<li class="">Descrição: O canal Full Cycle frequentemente publica vídeos práticos e de alta qualidade sobre desenvolvimento com Go, incluindo TDD. Vale a pena explorar os vídeos deles.</li>
</ul>
</li>
</ol>
<p><strong>Configuração e Uso do VS Code para Desenvolvimento Go:</strong></p>
<ol>
<li class="">
<p><strong>VSCode para Golang [2022] Configuração Simples! (YouTube - Code Go):</strong></p>
<ul>
<li class="">Link: <a href="https://www.youtube.com/watch?v=pvfESSAbbts" target="_blank" rel="noopener noreferrer" class="">https://www.youtube.com/watch?v=pvfESSAbbts</a></li>
<li class="">Descrição: Um guia visual para configurar o VS Code para desenvolvimento em Go, incluindo a instalação da extensão e ferramentas essenciais.</li>
</ul>
</li>
<li class="">
<p><strong>Documentação Oficial da Extensão Go para VS Code:</strong></p>
<ul>
<li class="">Link: (Acesse diretamente pela aba de Extensões no VS Code, procure por &quot;Go&quot; e clique na extensão para ver sua documentação detalhada).</li>
<li class="">Descrição: A documentação oficial é sempre a fonte mais atualizada sobre os recursos da extensão, incluindo depuração de testes, code navigation, etc.</li>
</ul>
</li>
</ol>
<p><strong>Dicas Adicionais:</strong></p>
<ul>
<li class=""><strong>Pratique, Pratique, Pratique:</strong> A melhor forma de internalizar o TDD é praticando. Comece com problemas pequenos e vá aumentando a complexidade.</li>
<li class=""><strong>Leia Código com Testes:</strong> Explore projetos open-source em Go no GitHub que utilizam TDD. Observar como outros desenvolvedores escrevem testes pode ser muito instrutivo.</li>
<li class=""><strong>Não Tenha Medo de Perguntar:</strong> Se tiver dúvidas, converse com seus colegas de equipe mais experientes. A troca de conhecimento é fundamental.</li>
</ul>
<p>Esperamos que estes recursos ajudem você a se aprofundar no mundo do TDD e a se tornar um desenvolvedor Go ainda mais eficaz e confiante!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="conclusão-sua-jornada-com-tdd-apenas-começou">Conclusão: Sua Jornada com TDD Apenas Começou<a href="#conclusão-sua-jornada-com-tdd-apenas-começou" class="hash-link" aria-label="Direct link to Conclusão: Sua Jornada com TDD Apenas Começou" title="Direct link to Conclusão: Sua Jornada com TDD Apenas Começou" translate="no">​</a></h2>
<p>Parabéns por chegar até aqui! Esperamos que este manual tenha fornecido uma base sólida e prática para você iniciar sua jornada com o Desenvolvimento Guiado por Testes (TDD) utilizando Golang.</p>
<p>Lembre-se que o TDD é mais do que uma técnica de teste; é uma disciplina de design de software que, com a prática, se tornará uma segunda natureza. Os benefícios em termos de qualidade de código, manutenibilidade, redução de bugs e confiança para realizar alterações são imensos.</p>
<p>Os principais pontos que abordamos e que gostaríamos que você levasse consigo são:</p>
<ul>
<li class="">O ciclo <strong>Red-Green-Refactor</strong> como seu mantra diário.</li>
<li class="">A importância de pensar na <strong>testabilidade desde o início</strong> do desenvolvimento de qualquer feature.</li>
<li class="">Como escrever <strong>testes unitários eficazes</strong> em Go, utilizando o pacote <code>testing</code>.</li>
<li class="">A necessidade de <strong>isolar dependências</strong> (como bancos de dados e filas) utilizando <strong>mocks e stubs</strong>, e como as interfaces em Go facilitam isso.</li>
<li class="">A <strong>diferença crucial entre testes unitários e testes de integração</strong>, e quando aplicar cada um.</li>
</ul>
<p>Não se preocupe se, no começo, o processo parecer um pouco mais lento. Com a prática, você ganhará fluidez e perceberá que o TDD, na verdade, pode acelerar o desenvolvimento a longo prazo, evitando retrabalho e longas sessões de depuração.</p>
<p>Utilize os exemplos e os links fornecidos como ponto de partida para sua exploração contínua. A comunidade Go é vasta e rica em recursos.</p>
<p>Estamos aqui para apoiar seu crescimento. Não hesite em discutir suas experiências, dúvidas e aprendizados com TDD com seus colegas e líderes de equipe.</p>
<p>Bem-vindo(a) novamente, e feliz TDD!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/01-base-de-conhecimento/onboarding/treinamento-tecnico/introducao-ao-tdd-para-novos-desenvolvedores.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs-preview/docs/base-de-conhecimento/onboarding/treinamento-tecnico/guia-para-evitar-overfetch-e-underfetch-em-projetos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Guia para Evitar Overfetch e Underfetch em Projetos</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs-preview/docs/manual-do-dev/ai-agents/manual-bots"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Manual do Bot Desenvolvedor 🤖</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introdução-por-que-começar-pelos-testes" class="table-of-contents__link toc-highlight">Introdução: Por que começar pelos testes?</a></li><li><a href="#o-que-é-tdd-desenvolvimento-guiado-por-testes" class="table-of-contents__link toc-highlight">O que é TDD (Desenvolvimento Guiado por Testes)?</a></li><li><a href="#por-que-tdd-é-importante" class="table-of-contents__link toc-highlight">Por que TDD é Importante?</a></li><li><a href="#como-desenvolver-baseado-em-testes-com-golang-e-vs-code-a-receita-de-bolo" class="table-of-contents__link toc-highlight">Como Desenvolver Baseado em Testes com Golang e VS Code (A &quot;Receita de Bolo&quot;)</a><ul><li><a href="#preparando-o-ambiente-go-e-vs-code" class="table-of-contents__link toc-highlight">Preparando o Ambiente (Go e VS Code)</a></li><li><a href="#nosso-primeiro-exemplo-uma-função-de-soma-simples" class="table-of-contents__link toc-highlight">Nosso Primeiro Exemplo: Uma Função de Soma Simples</a></li><li><a href="#pensando-a-aplicação-de-modo-testável-como-começar-uma-feature-pelos-testes" class="table-of-contents__link toc-highlight">Pensando a Aplicação de Modo Testável: Como Começar uma Feature pelos Testes</a></li></ul></li><li><a href="#lidando-com-dependências-externas-mocks-e-stubs" class="table-of-contents__link toc-highlight">Lidando com Dependências Externas: Mocks e Stubs</a><ul><li><a href="#testes-unitários-vs-testes-de-integração-entendendo-a-diferença" class="table-of-contents__link toc-highlight">Testes Unitários vs. Testes de Integração: Entendendo a Diferença</a></li></ul></li><li><a href="#recursos-adicionais-links-úteis-tutoriais-e-vídeos-em-português" class="table-of-contents__link toc-highlight">Recursos Adicionais: Links Úteis (Tutoriais e Vídeos em Português)</a></li><li><a href="#conclusão-sua-jornada-com-tdd-apenas-começou" class="table-of-contents__link toc-highlight">Conclusão: Sua Jornada com TDD Apenas Começou</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs-preview/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs-preview/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>
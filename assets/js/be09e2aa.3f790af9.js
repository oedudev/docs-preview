"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[6218],{4085(e,s,o){o.r(s),o.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"manual-do-dev/projetos/e-sus-urgencias/como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus","title":"Como executar scripts DML nos ambientes do e-SUS (DataSUS)","description":"Garanta que voc\xea tenha os seguintes acessos:","source":"@site/docs/02-manual-do-dev/projetos/e-sus-urgencias/como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus.md","sourceDirName":"02-manual-do-dev/projetos/e-sus-urgencias","slug":"/manual-do-dev/projetos/e-sus-urgencias/como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-manual-do-dev/projetos/e-sus-urgencias/como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Casos de Uso","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/casos-de-uso-dfo"},"next":{"title":"Cria\xe7\xe3o de CRUDs","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/criacao-de-cruds"}}');var n=o(4848),r=o(8453);const i={},t="Como executar scripts DML nos ambientes do e-SUS (DataSUS)",d={},c=[{value:"<strong>Garanta que voc\xea tenha os seguintes acessos:</strong>",id:"garanta-que-voc\xea-tenha-os-seguintes-acessos",level:4},{value:"<strong>Passo a passo:</strong>",id:"passo-a-passo",level:4}];function l(e){const s={a:"a",br:"br",code:"code",h1:"h1",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"como-executar-scripts-dml-nos-ambientes-do-e-sus-datasus",children:"Como executar scripts DML nos ambientes do e-SUS (DataSUS)"})}),"\n",(0,n.jsx)(s.h4,{id:"garanta-que-voc\xea-tenha-os-seguintes-acessos",children:(0,n.jsx)(s.strong,{children:"Garanta que voc\xea tenha os seguintes acessos:"})}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"VPN FortiClient"}),"\n",(0,n.jsxs)(s.li,{children:["Acesso ao Rancher: ",(0,n.jsx)(s.a,{href:"https://console-prd.saude.gov.br/",children:"https://console-prd.saude.gov.br/"})]}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Em todo o processo voc\xea precisar\xe1 ",(0,n.jsx)(s.strong,{children:"obrigatoriamente"})," estar com a VPN ligada. ",(0,n.jsx)(s.strong,{children:"Lembrando que, para ligar a VPN FortiClient, primeiro voc\xea ter\xe1 que se desconectar da VPN Pritunl da empresa para evitar conflitos."})]}),"\n",(0,n.jsx)(s.h4,{id:"passo-a-passo",children:(0,n.jsx)(s.strong,{children:"Passo a passo:"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"1."})," Entre no ",(0,n.jsx)(s.strong,{children:"Rancher"}),", abra o ",(0,n.jsx)(s.strong,{children:"pod de backend"})," do ambiente que voc\xea deseja atualizar e clique nos tr\xeas pontinhos \u2192 ",(0,n.jsx)(s.strong,{children:"Execute Shell"}),"."]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2026-01/PgginvfmbwMNKaLt-image.png",children:(0,n.jsx)(s.img,{src:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2026-01/scaled-1680-/PgginvfmbwMNKaLt-image.png",alt:"image.png"})})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"OBS:"})," lembrando que o banco de dados do ambiente de desenvolvimento e homologa\xe7\xe3o s\xe3o os mesmos!"]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"2."})," Verifique se o ",(0,n.jsx)(s.code,{children:"psql"})," ",(0,n.jsx)(s.strong,{children:"(CLI do PostgreSQL)"})," est\xe1 instalado no pod com o comando abaixo. Caso j\xe1 esteja, pule para a etapa 5."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"which psql\n"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"3."})," Se n\xe3o houver o bin\xe1rio, verifique qual \xe9 o sistema operacional da imagem do pod antes de instalar o ",(0,n.jsx)(s.code,{children:"psql"})," com o comando abaixo:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"cat /etc/os-release\n"})}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"4."})," Muito provavelmente ser\xe1 informado de que \xe9 o ",(0,n.jsx)(s.strong,{children:"Alpine Linux"}),". Se for, execute o comando abaixo para instalar o ",(0,n.jsx)(s.code,{children:"psql"}),":"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"apk add postgresql-client\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Caso n\xe3o seja ",(0,n.jsx)(s.strong,{children:"Alpine Linux"}),", instale o ",(0,n.jsx)(s.code,{children:"psql"})," conforme o gerenciador de pacotes do sistema operacional do pod."]}),"\n",(0,n.jsxs)(s.p,{children:['E para verificar se a instala\xe7\xe3o foi efetuada com sucesso, execute o comando "',(0,n.jsx)(s.strong,{children:"psql --version"}),'".']}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"5."})," Com o bin\xe1rio do ",(0,n.jsx)(s.code,{children:"psql"})," instalado, conecte-se ao banco via ",(0,n.jsx)(s.code,{children:"psql"})," usando o comando abaixo."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"PGPASSWORD=${DB_PASSWORD} psql -h ${DB_HOST} -p ${DB_PORT} -U ${DB_USER} -d ${DB_NAME}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Caso o comando falhe, verifique quais vari\xe1veis de ambiente (as importantes s\xe3o aquelas ",(0,n.jsx)(s.strong,{children:"DB_alguma-coisa"})," ou algo parecido) o pod possui usando o comando ",(0,n.jsx)(s.code,{children:"export"})," e substitua as vari\xe1veis no comando de conex\xe3o."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"6."})," J\xe1 dentro do banco de dados, execute os scripts que foram informados pela equipe de DB do DataSUS como sendo um script DML, provavelmente vai estar assim (o script DML seria o c\xf3digo comentado), ou ent\xe3o ser\xe1 o script todo, isso ser\xe1 informado por eles:"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2026-01/4Gv3UQH77i4OpgSr-image.png",children:(0,n.jsx)(s.img,{src:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2026-01/scaled-1680-/4Gv3UQH77i4OpgSr-image.png",alt:"image.png"})})}),"\n",(0,n.jsx)(s.p,{children:"Execute esse script no banco de dados."}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.strong,{children:"7."})," Estando tudo certo, pode sair do ",(0,n.jsx)(s.code,{children:"psql"})," ",(0,n.jsx)(s.strong,{children:"(CLI do PostgreSQL)"}),' com o comando "',(0,n.jsx)(s.strong,{children:"\\q"}),'", feche o shell do pod e deslogue do ',(0,n.jsx)(s.strong,{children:"Rancher"}),".",(0,n.jsx)(s.br,{}),"\n","Se der tudo certo, o processo foi finalizado com sucesso!"]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453(e,s,o){o.d(s,{R:()=>i,x:()=>t});var a=o(6540);const n={},r=a.createContext(n);function i(e){const s=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),a.createElement(r.Provider,{value:s},e.children)}}}]);
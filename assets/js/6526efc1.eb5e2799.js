"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[2709],{8138(e,s,t){t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"manual-do-dev/troubleshooting/tests/testes-flaky-tests-em-integracao-vs-infra","title":"Testes: Flaky Tests em Integra\xe7\xe3o vs Infra","description":"O Problema","source":"@site/docs/02-manual-do-dev/troubleshooting/tests/testes-flaky-tests-em-integracao-vs-infra.md","sourceDirName":"02-manual-do-dev/troubleshooting/tests","slug":"/manual-do-dev/troubleshooting/tests/testes-flaky-tests-em-integracao-vs-infra","permalink":"/docs-preview/docs/manual-do-dev/troubleshooting/tests/testes-flaky-tests-em-integracao-vs-infra","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-manual-do-dev/troubleshooting/tests/testes-flaky-tests-em-integracao-vs-infra.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"SvelteKit: Erro de build no Docker (Adapter Mismatch)","permalink":"/docs-preview/docs/manual-do-dev/troubleshooting/frontend-build/sveltekit-erro-de-build-no-docker-adapter-mismatch"},"next":{"title":"Tutorial - Basics","permalink":"/docs-preview/docs/category/tutorial---basics"}}');var o=t(4848),n=t(8453);const r={},i="Testes: Flaky Tests em Integra\xe7\xe3o vs Infra",l={},d=[{value:"O Problema",id:"o-problema",level:2},{value:"Causas Comuns",id:"causas-comuns",level:2},{value:"Estrat\xe9gias de Mitiga\xe7\xe3o",id:"estrat\xe9gias-de-mitiga\xe7\xe3o",level:2}];function c(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"testes-flaky-tests-em-integra\xe7\xe3o-vs-infra",children:"Testes: Flaky Tests em Integra\xe7\xe3o vs Infra"})}),"\n",(0,o.jsx)(s.h1,{id:"testes-flaky-tests-intermitentes",children:"Testes: Flaky Tests (Intermitentes)"}),"\n",(0,o.jsx)(s.h2,{id:"o-problema",children:"O Problema"}),"\n",(0,o.jsx)(s.p,{children:'Testes de integra\xe7\xe3o que falham aleatoriamente ("flaky tests"): \xe0s vezes passam, \xe0s vezes falham, sem altera\xe7\xe3o de c\xf3digo.'}),"\n",(0,o.jsx)(s.h2,{id:"causas-comuns",children:"Causas Comuns"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Race Conditions:"})," O teste tenta verificar algo antes do banco de dados ou da API ter respondido."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Estado Compartilhado:"})," Um teste anterior sujou o banco e n\xe3o limpou."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Recursos de Infra:"})," Timeout por lentid\xe3o do container/banco no CI."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"estrat\xe9gias-de-mitiga\xe7\xe3o",children:"Estrat\xe9gias de Mitiga\xe7\xe3o"}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Wait, don't sleep:"})," Nunca use ",(0,o.jsx)(s.code,{children:"sleep(5)"}),". Use asser\xe7\xf5es de espera expl\xedcita (ex: ",(0,o.jsx)(s.code,{children:"await page.waitForSelector()"}),", ",(0,o.jsx)(s.code,{children:"retry_until_success"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Isolamento:"})," Garanta que cada teste roda em uma transa\xe7\xe3o de banco que \xe9 revertida (rollback) ao final."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Logs:"})," Aumente a verbosidade dos logs no CI para identificar se a falha \xe9 timeout ou l\xf3gica."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453(e,s,t){t.d(s,{R:()=>r,x:()=>i});var a=t(6540);const o={},n=a.createContext(o);function r(e){const s=a.useContext(n);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(n.Provider,{value:s},e.children)}}}]);
"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[1125],{9962(e,s,r){r.r(s),r.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>i,metadata:()=>n,toc:()=>t});const n=JSON.parse('{"id":"manual-do-dev/projetos/e-sus-urgencias/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests","title":"Plano de Refatora\xe7\xe3o \u2013 Overfetch, Underfetch e Boas Pr\xe1ticas em Requests","description":"1. Objetivo","source":"@site/docs/02-manual-do-dev/projetos/e-sus-urgencias/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests.md","sourceDirName":"02-manual-do-dev/projetos/e-sus-urgencias","slug":"/manual-do-dev/projetos/e-sus-urgencias/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/02-manual-do-dev/projetos/e-sus-urgencias/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Metodologia de Administra\xe7\xe3o de Dados (MAD)","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/metodologia-de-administracao-de-dados-mad"},"next":{"title":"Solicitando acesso \xe0s ferramentas (DataSUS)","permalink":"/docs-preview/docs/manual-do-dev/projetos/e-sus-urgencias/solicitando-acesso-as-ferramentas-datasus"}}');var o=r(4848),a=r(8453);const i={},d="Plano de Refatora\xe7\xe3o \u2013 Overfetch, Underfetch e Boas Pr\xe1ticas em Requests",c={},t=[{value:"<strong>1. Objetivo</strong>",id:"1-objetivo",level:3},{value:"<strong>2. Crit\xe9rios de An\xe1lise</strong>",id:"2-crit\xe9rios-de-an\xe1lise",level:3},{value:"<strong>3. Ocorr\xeancias Identificadas P\xe1gina Home (TARM)</strong>",id:"3-ocorr\xeancias-identificadas-p\xe1gina-home-tarm",level:3},{value:"<strong>Requests UserID</strong>",id:"requests-userid",level:4},{value:"<strong>3.1 Ocorr\xeancia 1 \u2013 Recupera\xe7\xe3o de</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;user_id&amp;lt;/strong&gt;</code>**",id:"31-ocorr\xeancia-1--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",level:4},{value:"<strong>3.2 Ocorr\xeancia 2 \u2013 Vari\xe1vel</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;userId&amp;lt;/strong&gt;</code> <strong>n\xe3o utilizada</strong>",id:"32-ocorr\xeancia-2--vari\xe1vel-ltstrong-classeditor-theme-bold-editor-theme-codeuseridltstrong-n\xe3o-utilizada",level:4},{value:"<strong>3.3 Ocorr\xeancia 3 \u2013 Recupera\xe7\xe3o de</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;user_id&amp;lt;/strong&gt;</code>**",id:"33-ocorr\xeancia-3--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",level:4},{value:"<strong>Requests User</strong>",id:"requests-user",level:4},{value:"<strong>3.4 Ocorr\xeancia 4 \u2013 Recupera\xe7\xe3o de nome do usu\xe1rio logado</strong>",id:"34-ocorr\xeancia-4--recupera\xe7\xe3o-de-nome-do-usu\xe1rio-logado",level:4},{value:"<strong>3.5 Ocorr\xeancia 5 \u2013 Request e Processamento de usu\xe1rios em</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;fetchOptions&amp;lt;/strong&gt;</code>**",id:"35-ocorr\xeancia-5--request-e-processamento-de-usu\xe1rios-em-ltstrong-classeditor-theme-bold-editor-theme-codefetchoptionsltstrong",level:4},{value:"<strong>3.6 Ocorr\xeancia 6 \u2013 Exposi\xe7\xe3o indevida de login de usu\xe1rio</strong>",id:"36-ocorr\xeancia-6--exposi\xe7\xe3o-indevida-de-login-de-usu\xe1rio",level:4},{value:"<strong>3.7 Ocorr\xeancia 7 \u2013 Filtro de incidentes no frontend</strong>",id:"37-ocorr\xeancia-7--filtro-de-incidentes-no-frontend",level:4},{value:"<strong>3.8 Ocorr\xeancia 8 \u2013 Dados desnecess\xe1rios no retorno</strong>",id:"38-ocorr\xeancia-8--dados-desnecess\xe1rios-no-retorno",level:4},{value:"<strong>3.9 Ocorr\xeancia 9 \u2013 Problema com Requests repetidas</strong>",id:"39-ocorr\xeancia-9--problema-com-requests-repetidas",level:4},{value:"<strong>3.10 Ocorr\xeancia 10 \u2013 Problema com Polling</strong>",id:"310-ocorr\xeancia-10--problema-com-polling",level:4},{value:"<strong>3.11 Ocorr\xeancia 11 \u2013 Requisi\xe7\xf5es redundantes na p\xe1gina TARM</strong>",id:"311-ocorr\xeancia-11--requisi\xe7\xf5es-redundantes-na-p\xe1gina-tarm",level:4},{value:"<strong>4. Ocorr\xeancias Identificadas M\xe9dico Regulador (MR)</strong>",id:"4-ocorr\xeancias-identificadas-m\xe9dico-regulador-mr",level:3},{value:"<strong>Requests UserID</strong>",id:"requests-userid-1",level:4},{value:"<strong>4.1 Ocorr\xeancia 1 \u2013 Recupera\xe7\xe3o de</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;user_id&amp;lt;/strong&gt;</code>**",id:"41-ocorr\xeancia-1--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",level:4},{value:"<strong>4.2 Ocorr\xeancia 2 \u2013 Requisi\xe7\xf5es possible-values e user</strong>",id:"42-ocorr\xeancia-2--requisi\xe7\xf5es-possible-values-e-user",level:4},{value:"<strong>4.3 Ocorr\xeancia 3 \u2013 Requisi\xe7\xf5es desnecess\xe1rias</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;/user/{id}&amp;lt;/strong&gt;</code> <strong>e</strong> <code>&amp;lt;strong class=&quot;editor-theme-bold editor-theme-code&quot;&gt;/employee/user_id/{id}&amp;lt;/strong&gt;</code>**",id:"43-ocorr\xeancia-3--requisi\xe7\xf5es-desnecess\xe1rias-ltstrong-classeditor-theme-bold-editor-theme-codeuseridltstrong-e-ltstrong-classeditor-theme-bold-editor-theme-codeemployeeuser_ididltstrong",level:4},{value:"<strong>4.4 Ocorr\xeancia 4 \u2013 Requisi\xe7\xf5es redundantes de incident</strong>",id:"44-ocorr\xeancia-4--requisi\xe7\xf5es-redundantes-de-incident",level:4},{value:"<strong>4.4 Ocorr\xeancia 5</strong> <strong>Occurrence-view</strong>",id:"44-ocorr\xeancia-5-occurrence-view",level:4},{value:"<strong>4.5 Ocorr\xeancia 5 \u2013 Requisi\xe7\xf5es redundantes na OccurrenceView</strong>",id:"45-ocorr\xeancia-5--requisi\xe7\xf5es-redundantes-na-occurrenceview",level:4},{value:"<strong>4.6 unit-selection</strong>",id:"46-unit-selection",level:4},{value:"<strong>4.7 Ocorr\xeancia 7 \u2013 Requisi\xe7\xf5es redundantes na UnitSelection</strong>",id:"47-ocorr\xeancia-7--requisi\xe7\xf5es-redundantes-na-unitselection",level:4},{value:"<strong>4.8 Ocorr\xeancia 8 \u2013 Falta de filtragem de tipos de viaturas na rota</strong> <code>/mobile-unit-type</code>",id:"48-ocorr\xeancia-8--falta-de-filtragem-de-tipos-de-viaturas-na-rota-mobile-unit-type",level:4},{value:"<strong>4.9 Ocorr\xeancia 9 \u2013 Retorno excessivo e falta de filtragem nas rotas da aba Conclus\xe3o</strong>",id:"49-ocorr\xeancia-9--retorno-excessivo-e-falta-de-filtragem-nas-rotas-da-aba-conclus\xe3o",level:4},{value:"<strong>5. Ocorr\xeancias Identificadas Operador de frota</strong>",id:"5-ocorr\xeancias-identificadas-operador-de-frota",level:3},{value:"<strong>5.1 Ocorr\xeancia 1 \u2013 Requests redundantes ao selecionar a mesma ocorr\xeancia</strong>",id:"51-ocorr\xeancia-1--requests-redundantes-ao-selecionar-a-mesma-ocorr\xeancia",level:4},{value:"<strong>5.2 Ocorr\xeancia 2</strong> <strong>- Dados do campo \u201cTransferir para\u201d</strong>",id:"52-ocorr\xeancia-2---dados-do-campo-transferir-para",level:4},{value:"<strong>5.3 Ocorr\xeancia 3</strong> <strong>- Pagina fleet-occurrence</strong>",id:"53-ocorr\xeancia-3---pagina-fleet-occurrence",level:4},{value:"<strong>5.4 Ocorr\xeancia 4</strong> <strong>- Falta de filtragem e uso de rotas redundantes na p\xe1gina ManageFleet</strong>",id:"54-ocorr\xeancia-4---falta-de-filtragem-e-uso-de-rotas-redundantes-na-p\xe1gina-managefleet",level:4},{value:"<strong>5.5 Ocorr\xeancia 5</strong> <strong>- Falta de filtragem e repeti\xe7\xe3o de requisi\xe7\xf5es na p\xe1gina Team</strong>",id:"55-ocorr\xeancia-5---falta-de-filtragem-e-repeti\xe7\xe3o-de-requisi\xe7\xf5es-na-p\xe1gina-team",level:4}];function l(e){const s={a:"a",br:"br",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"plano-de-refatora\xe7\xe3o--overfetch-underfetch-e-boas-pr\xe1ticas-em-requests",children:"Plano de Refatora\xe7\xe3o \u2013 Overfetch, Underfetch e Boas Pr\xe1ticas em Requests"})}),"\n",(0,o.jsx)(s.h3,{id:"1-objetivo",children:(0,o.jsx)(s.strong,{children:"1. Objetivo"})}),"\n",(0,o.jsxs)(s.p,{children:["Este documento tem como objetivo identificar, no projeto, todos os pontos em que ocorrem problemas relacionados a ",(0,o.jsx)(s.strong,{children:"overfetch"}),", ",(0,o.jsx)(s.strong,{children:"underfetch"})," e outras falhas ou vulnerabilidades no consumo de ",(0,o.jsx)(s.strong,{children:"requests"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["A partir desse diagn\xf3stico, ser\xe1 elaborado um ",(0,o.jsx)(s.strong,{children:"plano de refatora\xe7\xe3o"})," com propostas de corre\xe7\xe3o alinhadas \xe0s boas pr\xe1ticas j\xe1 estabelecidas na equipe."]}),"\n",(0,o.jsxs)(s.p,{children:["Para refer\xeancia, consulte tamb\xe9m o material: ",(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/books/manual-do-novo-funcionario/page/guia-para-evitar-overfetch-e-underfetch-em-projetos",children:"Guia para Evitar Overf... | Ajuda DigitalSys"})]}),"\n",(0,o.jsx)(s.h3,{id:"2-crit\xe9rios-de-an\xe1lise",children:(0,o.jsx)(s.strong,{children:"2. Crit\xe9rios de An\xe1lise"})}),"\n",(0,o.jsx)(s.p,{children:"Durante a revis\xe3o, foram considerados casos como:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Overfetch:"})," endpoints que retornam mais dados do que o necess\xe1rio para a tela/funcionalidade."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Underfetch:"})," endpoints que obrigam o frontend a realizar m\xfaltiplas requisi\xe7\xf5es para montar uma tela ou completar uma a\xe7\xe3o."]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"3-ocorr\xeancias-identificadas-p\xe1gina-home-tarm",children:(0,o.jsx)(s.strong,{children:"3. Ocorr\xeancias Identificadas P\xe1gina Home (TARM)"})}),"\n",(0,o.jsxs)(s.p,{children:["Na ",(0,o.jsx)(s.strong,{children:"HomePage"})," foram identificadas diversas requests durante a renderiza\xe7\xe3o, algumas delas inclusive ",(0,o.jsx)(s.strong,{children:"repetidas"}),", resultando em problemas de ",(0,o.jsx)(s.strong,{children:"overfetch"})," e ",(0,o.jsx)(s.strong,{children:"uso desnecess\xe1rio de rede"}),"."]}),"\n",(0,o.jsx)(s.p,{children:"network da homePage"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-1.png",alt:""})}),"\n",(0,o.jsx)(s.h4,{id:"requests-userid",children:(0,o.jsx)(s.strong,{children:"Requests UserID"})}),"\n",(0,o.jsxs)(s.h4,{id:"31-ocorr\xeancia-1--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",children:[(0,o.jsx)(s.strong,{children:"3.1 Ocorr\xeancia 1 \u2013 Recupera\xe7\xe3o de"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">user_id&lt;/strong>'}),"**"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xe3o"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-2.png",alt:""}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Recupera o token do ",(0,o.jsx)(s.code,{children:"localStorage"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Decodifica o token com ",(0,o.jsx)(s.code,{children:"getUserIdByToken"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Faz uma chamada a ",(0,o.jsx)(s.code,{children:"getUsers()"})," para obter todos os usu\xe1rios."]}),"\n",(0,o.jsxs)(s.li,{children:["Executa um ",(0,o.jsx)(s.code,{children:".find()"})," para localizar o usu\xe1rio pelo ",(0,o.jsx)(s.code,{children:"user_id"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Atualiza vari\xe1veis reativas (",(0,o.jsx)(s.code,{children:"responsibleTarm"}),", ",(0,o.jsx)(s.code,{children:"currentUserName"}),") com o nome do usu\xe1rio."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Uma chamada completa para ",(0,o.jsx)(s.code,{children:"getUsers()"})," \xe9 feita apenas para recuperar dados do usu\xe1rio logado."]}),"\n",(0,o.jsxs)(s.li,{children:["Esse comportamento gera ",(0,o.jsx)(s.strong,{children:"overfetch"}),", pois carrega todos os usu\xe1rios desnecessariamente."]}),"\n",(0,o.jsx)(s.li,{children:"Al\xe9m disso, j\xe1 existe no backend a capacidade de identificar o usu\xe1rio a partir do token da requisi\xe7\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Utilizar a rota ",(0,o.jsx)(s.code,{children:"/shared/possible-values"})," para incluir o retorno do nome do usu\xe1rio e id autenticado."]}),"\n",(0,o.jsx)(s.li,{children:"Dessa forma, evitamos m\xfaltiplas requests e eliminamos a necessidade de buscar todos os usu\xe1rios apenas para identificar o logado."}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"32-ocorr\xeancia-2--vari\xe1vel-ltstrong-classeditor-theme-bold-editor-theme-codeuseridltstrong-n\xe3o-utilizada",children:[(0,o.jsx)(s.strong,{children:"3.2 Ocorr\xeancia 2 \u2013 Vari\xe1vel"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">userId&lt;/strong>'})," ",(0,o.jsx)(s.strong,{children:"n\xe3o utilizada"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xe3o:"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-3.png",alt:""}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O sistema realiza uma request para buscar o ",(0,o.jsx)(s.code,{children:"user_id"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["O valor \xe9 armazenado em uma vari\xe1vel (",(0,o.jsx)(s.code,{children:"userId"}),") que n\xe3o \xe9 utilizada posteriormente."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Request desnecess\xe1ria."}),"\n",(0,o.jsx)(s.li,{children:"Consumo de recurso sem efeito pr\xe1tico no sistema."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Remover a request e a vari\xe1vel, j\xe1 que o valor n\xe3o \xe9 utilizado."}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"33-ocorr\xeancia-3--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",children:[(0,o.jsx)(s.strong,{children:"3.3 Ocorr\xeancia 3 \u2013 Recupera\xe7\xe3o de"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">user_id&lt;/strong>'}),"**"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xe3o (composables/usePhoneSystemService.ts):"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-4.png",alt:""}),(0,o.jsx)(s.br,{}),"\n",(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O sistema realiza uma request para buscar o ",(0,o.jsx)(s.code,{children:"user_id"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["O valor \xe9 utilizado em uma nova request (",(0,o.jsx)(s.code,{children:"getPhoneCredentials"}),")."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Request desnecess\xe1ria."}),"\n",(0,o.jsx)(s.li,{children:"Consumo de recurso sem efeito pr\xe1tico no sistema."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Remover a request, no backend existe uma fun\xe7\xe3o para pegar o id do usuario pelo token da request."}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["<u>obs: Essa ocorr\xeancia ira existir em todos as paginas que utilizam o componente </u><u>",(0,o.jsx)(s.strong,{children:"callSystem"}),"</u><u> pode ser resolvida posteriormente</u>"]}),"\n",(0,o.jsx)(s.h4,{id:"requests-user",children:(0,o.jsx)(s.strong,{children:"Requests User"})}),"\n",(0,o.jsx)(s.h4,{id:"34-ocorr\xeancia-4--recupera\xe7\xe3o-de-nome-do-usu\xe1rio-logado",children:(0,o.jsx)(s.strong,{children:"3.4 Ocorr\xeancia 4 \u2013 Recupera\xe7\xe3o de nome do usu\xe1rio logado"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xf5es que utilizam ",(0,o.jsx)(s.code,{children:"getUsers()"})," apenas para obter o usu\xe1rio autenticado."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O frontend realiza uma chamada completa para ",(0,o.jsx)(s.code,{children:"getUsers()"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Usa o retorno apenas para identificar o nome do usu\xe1rio logado."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Overfetch"}),": todos os usu\xe1rios s\xe3o carregados sem necessidade."]}),"\n",(0,o.jsxs)(s.li,{children:["Requisi\xe7\xf5es redundantes, j\xe1 que esse caso foi mapeado e ser\xe1 resolvido na ",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia 1 do modulo UserID"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Reutilizar a solu\xe7\xe3o implementada via ",(0,o.jsx)(s.code,{children:"/shared/possible-values"}),", retornando diretamente o nome do usu\xe1rio autenticado."]}),"\n",(0,o.jsx)(s.li,{children:"Assim, elimina-se a necessidade dessa chamada extra."}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"35-ocorr\xeancia-5--request-e-processamento-de-usu\xe1rios-em-ltstrong-classeditor-theme-bold-editor-theme-codefetchoptionsltstrong",children:[(0,o.jsx)(s.strong,{children:"3.5 Ocorr\xeancia 5 \u2013 Request e Processamento de usu\xe1rios em"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">fetchOptions&lt;/strong>'}),"**"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xe3o ",(0,o.jsx)(s.code,{children:"fetchOptions"})," processo/request utilizado para popular o campo ",(0,o.jsx)(s.em,{children:(0,o.jsx)(s.strong,{children:"Enviar para"})})]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-09/rNIJdscMwvTrQQdn-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-5.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-09/HSN7zydx91yrWeAi-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-6.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O sistema realiza uma request para buscar o ",(0,o.jsx)(s.code,{children:"user"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"A rota retorna um volume muito grande de dados (todos os usu\xe1rios)."}),"\n",(0,o.jsxs)(s.li,{children:["Fun\xe7\xe3o processAvailableEmployees recebe os dados de ",(0,o.jsx)(s.code,{children:"getUsers()"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Filtra usu\xe1rios com ",(0,o.jsx)(s.code,{children:"status = ativo"})," e ",(0,o.jsx)(s.code,{children:"profile = m\xe9dico regulador"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Cria objetos ",(0,o.jsx)(s.code,{children:"{ key: id, label: nome }"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Ordena alfabeticamente."}),"\n",(0,o.jsx)(s.li,{children:"O frontend carrega a lista completa e aplica filtros conforme o usu\xe1rio digita."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Overfetch"}),": todos os usu\xe1rios s\xe3o retornados e filtrados no frontend."]}),"\n",(0,o.jsx)(s.li,{children:"Carga de dados excessiva e perda de performance."}),"\n",(0,o.jsx)(s.li,{children:"O frontend executa l\xf3gica de neg\xf3cio que deveria estar no backend."}),"\n",(0,o.jsx)(s.li,{children:"A l\xf3gica de filtro est\xe1 no frontend, tornando o sistema mais lento e pesado."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Implementar busca incremental no backend."}),"\n",(0,o.jsx)(s.li,{children:"Ao digitar, o frontend deve disparar uma request com debounce (ex.: 300\u2013500ms) para retornar apenas os usu\xe1rios compat\xedveis com o termo buscado."}),"\n",(0,o.jsxs)(s.li,{children:["A resposta deve conter ",(0,o.jsx)(s.strong,{children:"apenas os campos necess\xe1rios"})," para uso no frontend (ex.: ",(0,o.jsx)(s.code,{children:"id"}),", ",(0,o.jsx)(s.code,{children:"descriptive_name"}),")."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"36-ocorr\xeancia-6--exposi\xe7\xe3o-indevida-de-login-de-usu\xe1rio",children:(0,o.jsx)(s.strong,{children:"3.6 Ocorr\xeancia 6 \u2013 Exposi\xe7\xe3o indevida de login de usu\xe1rio"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Rota ",(0,o.jsx)(s.code,{children:"GET /user"})]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O endpoint retorna informa\xe7\xf5es do usu\xe1rio, incluindo o campo ",(0,o.jsx)(s.code,{children:"name"}),", que cont\xe9m o login utilizado para autentica\xe7\xe3o."]}),"\n",(0,o.jsx)(s.li,{children:"Atualmente, qualquer usu\xe1rio do sistema consegue acessar essa rota e visualizar o login de outros usu\xe1rios."}),"\n",(0,o.jsx)(s.li,{children:"Exemplo de resposta:"}),"\n"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-json",children:'{\n  "id": 2,\n  "descriptive_name": "Marcio Sobral",\n  "status": "ativo",\n  "name": "admin.tarm",\n  "profile": {\n    "id": 2,\n    "title": "TARM",\n    "text": "Profile for Operador TARM"\n  },\n  "professional_type": null,\n  "team": null\n}\n'})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O campo ",(0,o.jsx)(s.code,{children:"name"})," exp\xf5e o login do usu\xe1rio, que \xe9 uma informa\xe7\xe3o sens\xedvel."]}),"\n",(0,o.jsxs)(s.li,{children:["Acesso a esse dado deveria ser restrito apenas a perfis ",(0,o.jsx)(s.strong,{children:"administrativos"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Usu\xe1rios comuns n\xe3o deveriam ter visibilidade do login interno de outros usu\xe1rios."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Ajustar a rota para que o campo ",(0,o.jsx)(s.code,{children:"name"})," n\xe3o seja retornado para usu\xe1rios comuns."]}),"\n",(0,o.jsxs)(s.li,{children:["Implementar ",(0,o.jsx)(s.strong,{children:"controle de acesso por perfil"}),": somente administradores podem visualizar logins de outros usu\xe1rios."]}),"\n",(0,o.jsxs)(s.li,{children:["Avaliar a necessidade de mover ou anonimizar esse campo, expondo apenas o ",(0,o.jsx)(s.code,{children:"descriptive_name"})," para n\xe3o-admins."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:""}),"\n",(0,o.jsx)(s.h4,{id:"37-ocorr\xeancia-7--filtro-de-incidentes-no-frontend",children:(0,o.jsx)(s.strong,{children:"3.7 Ocorr\xeancia 7 \u2013 Filtro de incidentes no frontend"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Rota ",(0,o.jsx)(s.code,{children:"GET /incident/mask"})," Rota utilizada para popular o campo ",(0,o.jsx)(s.em,{children:(0,o.jsx)(s.strong,{children:"Relacionar ocorr\xeancia existente"})})]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-09/ho0MtIUGxNOsroJ0-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-7.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"A rota retorna uma lista extensa de incidentes."}),"\n",(0,o.jsx)(s.li,{children:"O frontend recebe todos os dados e filtra apenas quando o usu\xe1rio digita."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Overfetch"})," semelhante ao caso de usu\xe1rios."]}),"\n",(0,o.jsx)(s.li,{children:"Maior tempo de carregamento e consumo de mem\xf3ria no navegador."}),"\n",(0,o.jsx)(s.li,{children:"Risco de inconsist\xeancia caso a base cres\xe7a ainda mais."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Alterar a rota para suportar ",(0,o.jsx)(s.strong,{children:"busca por termo"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"O frontend envia a string digitada pelo usu\xe1rio (com debounce) e recebe apenas os incidentes que correspondem \xe0 busca."}),"\n",(0,o.jsx)(s.li,{children:"Limitar o retorno aos campos realmente utilizados pelo frontend."}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"38-ocorr\xeancia-8--dados-desnecess\xe1rios-no-retorno",children:(0,o.jsx)(s.strong,{children:"3.8 Ocorr\xeancia 8 \u2013 Dados desnecess\xe1rios no retorno"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Rota ",(0,o.jsx)(s.code,{children:"GET /shared/possible-values"})]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["A rota atualmente retorna diversos elementos, incluindo ",(0,o.jsx)(s.code,{children:"employee"})," e ",(0,o.jsx)(s.code,{children:"open_incident"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["No frontend, esses dados ",(0,o.jsx)(s.strong,{children:"n\xe3o s\xe3o/ser\xe3o utilizados"})," na constru\xe7\xe3o da p\xe1gina."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Overfetch:"})," envia dados desnecess\xe1rios para o frontend, aumentando o tr\xe1fego e processamento."]}),"\n",(0,o.jsx)(s.li,{children:"Dificulta manuten\xe7\xe3o futura e aumenta risco de inconsist\xeancia."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Remover os campos ",(0,o.jsx)(s.code,{children:"employee"})," e ",(0,o.jsx)(s.code,{children:"open_incident"})," do retorno da rota."]}),"\n",(0,o.jsxs)(s.li,{children:["Garantir que a rota entregue ",(0,o.jsx)(s.strong,{children:"somente os elementos realmente utilizados"})," para popular a p\xe1gina."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["obs: a remo\xe7\xe3o de employee deve ser feita depois da implementa\xe7\xe3o/corre\xe7\xe3o da <u>",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia 2"}),"</u>"]}),"\n",(0,o.jsx)(s.h4,{id:"39-ocorr\xeancia-9--problema-com-requests-repetidas",children:(0,o.jsx)(s.strong,{children:"3.9 Ocorr\xeancia 9 \u2013 Problema com Requests repetidas"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Home (TARM)"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Ao editar/criar uma ocorr\xeancia criada pelo usu\xe1rio ",(0,o.jsx)(s.strong,{children:"TARM"}),", ao navegar entre os formul\xe1rios ",(0,o.jsx)(s.strong,{children:'"Dados b\xe1sicos"'}),", ",(0,o.jsx)(s.strong,{children:'"Ocorr\xeancia"'})," e ",(0,o.jsx)(s.strong,{children:'"Paciente"'}),", o sistema executa repetidas requisi\xe7\xf5es para:","\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /shared/possible-values"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /user"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /incident/mask"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(s.li,{children:["O problema ocorre porque dentro dos ",(0,o.jsx)(s.strong,{children:"componentes de formul\xe1rio de edi\xe7\xe3o"})," existem chamadas desnecess\xe1rias para buscar dados que j\xe1 haviam sido carregados quando a p\xe1gina foi constru\xedda."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Requisi\xe7\xf5es duplicadas"})," aumentam o consumo de rede e tornam a navega\xe7\xe3o mais lenta."]}),"\n",(0,o.jsx)(s.li,{children:"O frontend perde efici\xeancia ao n\xe3o reutilizar os dados j\xe1 dispon\xedveis no estado da p\xe1gina."}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Obs: Esse comportamento j\xe1 foi apontado como um problema recorrente na documenta\xe7\xe3o"})," ",(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/books/manual-do-desenvolvedor/page/documentacao-front-end-atomic-design",children:(0,o.jsx)(s.strong,{children:"Documenta\xe7\xe3o Front-End... | Ajuda DigitalSys"})})," <u>",(0,o.jsx)(s.strong,{children:"2. Requisi\xe7\xf5es nos componentes."}),"</u>"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Remover requisi\xe7\xf5es desnecess\xe1rias dos componentes de formul\xe1rio."}),"\n",(0,o.jsx)(s.li,{children:"Consumir diretamente os dados que j\xe1 foram carregados ao inicializar a p\xe1gina."}),"\n",(0,o.jsxs)(s.li,{children:["Refor\xe7ar a pr\xe1tica de ",(0,o.jsx)(s.strong,{children:"n\xe3o disparar requests dentro de componentes"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"310-ocorr\xeancia-10--problema-com-polling",children:(0,o.jsx)(s.strong,{children:"3.10 Ocorr\xeancia 10 \u2013 Problema com Polling"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Formul\xe1rio de Ocorr\xeancia"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Ao clicar em editar uma ocorr\xeancia, o sistema utiliza ",(0,o.jsx)(s.strong,{children:"polling"})," para buscar atualiza\xe7\xf5es constantes da ocorr\xeancia."]}),"\n",(0,o.jsx)(s.li,{children:"Essa solu\xe7\xe3o foi implementada como medida tempor\xe1ria devido ao prazo de entrega do projeto."}),"\n",(0,o.jsxs)(s.li,{children:["Ap\xf3s clicar no bot\xe3o ",(0,o.jsx)(s.strong,{children:"Voltar"}),", o sistema continua realizando requests para a ocorr\xeancia anterior, mesmo que o usu\xe1rio j\xe1 tenha sa\xeddo do formul\xe1rio."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Consumo desnecess\xe1rio de rede e processamento."}),"\n",(0,o.jsx)(s.li,{children:"Possibilidade de inconsist\xeancias, j\xe1 que o sistema continua atualizando dados que n\xe3o est\xe3o mais sendo visualizados."}),"\n",(0,o.jsx)(s.li,{children:"Impacto negativo na performance geral da aplica\xe7\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Corrigir o comportamento de polling para que seja interrompido ao sair do formul\xe1rio."}),"\n",(0,o.jsxs)(s.li,{children:["Substituir futuramente a estrat\xe9gia de polling pela implementa\xe7\xe3o de ",(0,o.jsx)(s.strong,{children:"WebSockets"}),", garantindo atualiza\xe7\xe3o em tempo real apenas quando necess\xe1rio."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"311-ocorr\xeancia-11--requisi\xe7\xf5es-redundantes-na-p\xe1gina-tarm",children:(0,o.jsx)(s.strong,{children:"3.11 Ocorr\xeancia 11 \u2013 Requisi\xe7\xf5es redundantes na p\xe1gina TARM"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Durante a renderiza\xe7\xe3o e navega\xe7\xe3o dentro da p\xe1gina ",(0,o.jsx)(s.strong,{children:"TARM"}),", foram identificadas diversas requisi\xe7\xf5es executadas de forma redundante.",(0,o.jsx)(s.br,{}),"\n","Todas as requests s\xe3o disparadas assim que a p\xe1gina \xe9 carregada e tamb\xe9m sempre que o usu\xe1rio interage com determinados componentes ou filtros, ocasionando chamadas repetidas \xe0s mesmas rotas e resultando em ",(0,o.jsx)(s.strong,{children:"overfetch"}),", uso desnecess\xe1rio de banda e aumento no tempo de resposta da interface."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/HI2TPzRdFPSFKck1-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-8.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Execu\xe7\xe3o repetida de m\xfaltiplas requisi\xe7\xf5es durante a renderiza\xe7\xe3o e navega\xe7\xe3o na p\xe1gina TARM."}),"\n",(0,o.jsx)(s.li,{children:"Falta de cache e reaproveitamento dos dados j\xe1 carregados."}),"\n",(0,o.jsx)(s.li,{children:"Requisi\xe7\xf5es desnecess\xe1rias para informa\xe7\xf5es que n\xe3o sofreram altera\xe7\xe3o."}),"\n",(0,o.jsx)(s.li,{children:"Impacto direto na performance geral e no tempo de carregamento dos componentes."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Consolidar todas as informa\xe7\xf5es necess\xe1rias da p\xe1gina ",(0,o.jsx)(s.strong,{children:"TARM"})," em uma ",(0,o.jsx)(s.strong,{children:"\xfanica requisi\xe7\xe3o de inicializa\xe7\xe3o"}),", eliminando chamadas redundantes."]}),"\n",(0,o.jsxs)(s.li,{children:["Implementar ",(0,o.jsx)(s.strong,{children:"mecanismos de cache ou armazenamento em estado global"})," para evitar novas requisi\xe7\xf5es ao interagir com filtros ou elementos que dependem dos mesmos dados."]}),"\n",(0,o.jsx)(s.li,{children:"Revisar os watchers e eventos da p\xe1gina para garantir que as chamadas \xe0 API ocorram apenas quando houver efetiva mudan\xe7a de par\xe2metros."}),"\n",(0,o.jsxs)(s.li,{children:["Centralizar a obten\xe7\xe3o dos dados compartilhados (ex.: informa\xe7\xf5es do usu\xe1rio logado, status e poss\xedveis valores) em uma rota \xfanica como ",(0,o.jsx)(s.code,{children:"/shared/possible-values"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["obs: mesmo problema relatado em Medico Regulador ",(0,o.jsx)(s.strong,{children:"4.5 Ocorr\xeancia 5 \u2013 Requisi\xe7\xf5es redundantes na OccurrenceView"})]}),"\n",(0,o.jsx)(s.h3,{id:"4-ocorr\xeancias-identificadas-m\xe9dico-regulador-mr",children:(0,o.jsx)(s.strong,{children:"4. Ocorr\xeancias Identificadas M\xe9dico Regulador (MR)"})}),"\n",(0,o.jsx)(s.h4,{id:"-1"}),"\n",(0,o.jsxs)(s.p,{children:["Na ",(0,o.jsx)(s.strong,{children:"RegulationMenu"})," foram identificadas diversas requests durante a renderiza\xe7\xe3o, algumas delas inclusive ",(0,o.jsx)(s.strong,{children:"repetidas"}),", resultando em problemas de ",(0,o.jsx)(s.strong,{children:"overfetch"})," e ",(0,o.jsx)(s.strong,{children:"uso desnecess\xe1rio de rede"}),"."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/iUVbKGiCgafMm227-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-9.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.h4,{id:"requests-userid-1",children:(0,o.jsx)(s.strong,{children:"Requests UserID"})}),"\n",(0,o.jsxs)(s.h4,{id:"41-ocorr\xeancia-1--recupera\xe7\xe3o-de-ltstrong-classeditor-theme-bold-editor-theme-codeuser_idltstrong",children:[(0,o.jsx)(s.strong,{children:"4.1 Ocorr\xeancia 1 \u2013 Recupera\xe7\xe3o de"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">user_id&lt;/strong>'}),"**"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"})," Fun\xe7\xe3o"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/ImsUBo8u28CGbjLa-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-10.png",alt:"image.png"})}),(0,o.jsx)(s.strong,{children:"Local:"})]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Fun\xe7\xe3o ",(0,o.jsx)(s.code,{children:"loadUserId"})]}),"\n",(0,o.jsxs)(s.li,{children:["Fun\xe7\xe3o ",(0,o.jsx)(s.code,{children:"getUserIdByToken"})]}),"\n",(0,o.jsxs)(s.li,{children:["Arquivo ",(0,o.jsx)(s.code,{children:"usePhoneSystemService.ts"})]}),"\n",(0,o.jsxs)(s.li,{children:["Componente ",(0,o.jsx)(s.code,{children:"banner-description-MR.vue"})]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["O sistema possui ",(0,o.jsx)(s.strong,{children:"tr\xeas pontos distintos"})," onde o ",(0,o.jsx)(s.code,{children:"user_id"})," \xe9 buscado ou processado de forma redundante."]}),"\n",(0,o.jsx)(s.li,{children:"Essas implementa\xe7\xf5es duplicam a mesma l\xf3gica em locais diferentes, dificultando manuten\xe7\xe3o e aumentando o risco de inconsist\xeancias."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"Requests e fun\xe7\xf5es duplicadas"})," para recuperar o mesmo dado."]}),"\n",(0,o.jsx)(s.li,{children:"Complexidade desnecess\xe1ria para uma informa\xe7\xe3o que j\xe1 pode ser obtida diretamente a partir do token da requisi\xe7\xe3o."}),"\n",(0,o.jsx)(s.li,{children:"Aumenta a chance de bugs e dificulta centralizar regras de autentica\xe7\xe3o/autoriza\xe7\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Remover fun\xe7\xf5es e vari\xe1veis redundantes nos arquivos citados."}),"\n",(0,o.jsxs)(s.li,{children:["Caso seja necess\xe1rio utilizar o ",(0,o.jsx)(s.code,{children:"user_id"})," no frontend, expor essa informa\xe7\xe3o diretamente em uma rota apropriada (ex.: ",(0,o.jsx)(s.code,{children:"/shared/possible-values"})," j\xe1 apontada) em vez de m\xfaltiplas fun\xe7\xf5es repetidas."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["obs: As requisi\xe7\xf5es para buscar o ",(0,o.jsx)(s.code,{children:"id"})," do funcion\xe1rio logado s\xe3o desnecess\xe1rias. Sempre que for preciso acessar informa\xe7\xf5es do usu\xe1rio logado, esses dados devem ser atribu\xeddos diretamente na rota ",(0,o.jsx)(s.code,{children:"/shared/possible-values"}),". Al\xe9m disso, nenhuma rota precisa mais receber o ",(0,o.jsx)(s.code,{children:"id"})," do usu\xe1rio manualmente, pois o backend j\xe1 pode extrair essa informa\xe7\xe3o do **token da request** de forma segura e padronizada."]}),"\n",(0,o.jsx)(s.h4,{id:"42-ocorr\xeancia-2--requisi\xe7\xf5es-possible-values-e-user",children:(0,o.jsx)(s.strong,{children:"4.2 Ocorr\xeancia 2 \u2013 Requisi\xe7\xf5es possible-values e user"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","P\xe1gina M\xe9dico regulador."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","As requisi\xe7\xf5es ",(0,o.jsx)(s.code,{children:"GET /shared/possible-values"})," e ",(0,o.jsx)(s.code,{children:"GET /user"})," apresentam problemas j\xe1 identificados nas ",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia 2"})," e ",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia 4"})," (P\xe1gina Home (TARM)). Ambas trazem dados redundantes, em excesso e em pontos onde n\xe3o s\xe3o necess\xe1rios, resultando em sobrecarga de requests e processamento desnecess\xe1rio no front-end."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"}),(0,o.jsx)(s.br,{}),"\n","Aplicar a mesma estrat\xe9gia de corre\xe7\xe3o definida para as ocorr\xeancias anteriores:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Centralizar os dados necess\xe1rios na rota ",(0,o.jsx)(s.code,{children:"GET /shared/possible-values"}),", evitando duplicidade com ",(0,o.jsx)(s.code,{children:"GET /user"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Restringir o retorno das rotas para apenas os campos realmente usados pelo front."}),"\n",(0,o.jsx)(s.li,{children:"Eliminar chamadas redundantes, reaproveitando os dados j\xe1 carregados na p\xe1gina."}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Obs:"}),(0,o.jsx)(s.br,{}),"\n","Esta ocorr\xeancia n\xe3o exige uma nova solu\xe7\xe3o t\xe9cnica, mas sim a ",(0,o.jsx)(s.strong,{children:"aplica\xe7\xe3o da mesma refatora\xe7\xe3o j\xe1 descrita nas Ocorr\xeancias 2 e 4"}),". Ambas as requisi\xe7\xf5es tem a mesma corre\xe7\xe3o da ",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia 2 e Ocorr\xeancia 4 do m\xe9dico regulador."})]}),"\n",(0,o.jsxs)(s.h4,{id:"43-ocorr\xeancia-3--requisi\xe7\xf5es-desnecess\xe1rias-ltstrong-classeditor-theme-bold-editor-theme-codeuseridltstrong-e-ltstrong-classeditor-theme-bold-editor-theme-codeemployeeuser_ididltstrong",children:[(0,o.jsx)(s.strong,{children:"4.3 Ocorr\xeancia 3 \u2013 Requisi\xe7\xf5es desnecess\xe1rias"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">/user/{id}&lt;/strong>'})," ",(0,o.jsx)(s.strong,{children:"e"})," ",(0,o.jsx)(s.code,{children:'&lt;strong class="editor-theme-bold editor-theme-code">/employee/user_id/{id}&lt;/strong>'}),"**"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Pontos do sistema M\xe9dico Regulador onde s\xe3o feitas consultas individuais ao usu\xe1rio logado."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","As rotas ",(0,o.jsx)(s.code,{children:"GET /user/{id}"})," e ",(0,o.jsx)(s.code,{children:"GET /employee/user_id/{id}"})," est\xe3o sendo chamadas passando o ID do usu\xe1rio apenas para recuperar informa\xe7\xf5es que n\xe3o s\xe3o relevantes ou j\xe1 est\xe3o dispon\xedveis em outras partes do sistema.",(0,o.jsx)(s.br,{}),"\n","Esse comportamento gera requests redundantes e aumenta o tempo de carregamento das p\xe1ginas."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Remover o uso das rotas ",(0,o.jsx)(s.code,{children:"GET /user/{id}"})," e ",(0,o.jsx)(s.code,{children:"GET /employee/user_id/{id}"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Centralizar as informa\xe7\xf5es do usu\xe1rio logado diretamente no retorno da rota ",(0,o.jsx)(s.code,{children:"GET /shared/possible-values"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Garantir que todas as p\xe1ginas e componentes que necessitem de informa\xe7\xf5es do usu\xe1rio logado consumam exclusivamente essa rota."}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"44-ocorr\xeancia-4--requisi\xe7\xf5es-redundantes-de-incident",children:(0,o.jsx)(s.strong,{children:"4.4 Ocorr\xeancia 4 \u2013 Requisi\xe7\xf5es redundantes de incident"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","P\xe1gina M\xe9dico Regulador (MR) \u2013 Detalhamento de Ocorr\xeancias"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Foram identificadas tr\xeas requisi\xe7\xf5es distintas sendo executadas ao acessar o detalhe de uma ocorr\xeancia:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /incident/362?include_history=true"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /mobile-unit/incident/362"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /incident/prank-calls/(43)%2099806-8708"})}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/i6PKd6GttlJkO1nd-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-11.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/QN3NEyZsKBqgLYij-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-12.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:"Essas chamadas ocorrem simultaneamente, trazendo informa\xe7\xf5es sobre o mesmo incidente ou dados complementares que poderiam ser obtidos em uma \xfanica resposta consolidada. Al\xe9m disso, sempre que o usu\xe1rio clica novamente em uma ocorr\xeancia j\xe1 aberta, as mesmas requisi\xe7\xf5es s\xe3o executadas novamente, mesmo com os dados j\xe1 carregados, resultando em consumo desnecess\xe1rio de rede e processamento."}),"\n",(0,o.jsxs)(s.h4,{id:"44-ocorr\xeancia-5-occurrence-view",children:[(0,o.jsx)(s.strong,{children:"4.4 Ocorr\xeancia 5"})," ",(0,o.jsx)(s.strong,{children:"Occurrence-view"})]}),"\n",(0,o.jsxs)(s.p,{children:["Na ",(0,o.jsx)(s.strong,{children:"OccurrenceView"})," foram identificadas diversas requests durante a renderiza\xe7\xe3o, algumas delas inclusive ",(0,o.jsx)(s.strong,{children:"repetidas"}),", resultando em problemas de ",(0,o.jsx)(s.strong,{children:"overfetch"})," e ",(0,o.jsx)(s.strong,{children:"uso desnecess\xe1rio de rede"}),", todas as requisi\xe7\xf5es s\xe3o feitas ao entrar nessa pagina."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Durante a renderiza\xe7\xe3o da p\xe1gina OccurrenceView, foram identificadas diversas requisi\xe7\xf5es executadas simultaneamente, incluindo chamadas repetidas e algumas desnecess\xe1rias, conforme registrado na inspe\xe7\xe3o de rede. Todas essas requests s\xe3o disparadas assim que a p\xe1gina \xe9 carregada, ocasionando ",(0,o.jsx)(s.strong,{children:"overfetch"})," e uso excessivo de rede."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/i3XCtSGCadBpCzS9-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-13.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:"Al\xe9m disso, h\xe1 requisi\xe7\xf5es voltadas apenas para recuperar o ID ou nome do usu\xe1rio logado, informa\xe7\xe3o que j\xe1 est\xe1 dispon\xedvel de forma centralizada e n\xe3o precisa ser buscada novamente."}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Execu\xe7\xe3o de m\xfaltiplas requisi\xe7\xf5es redundantes na renderiza\xe7\xe3o inicial."}),"\n",(0,o.jsx)(s.li,{children:"Falta de controle de cache ou reutiliza\xe7\xe3o de dados j\xe1 carregados."}),"\n",(0,o.jsx)(s.li,{children:"Requisi\xe7\xf5es desnecess\xe1rias para dados do usu\xe1rio logado, impactando desempenho."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Consolidar os dados necess\xe1rios da OccurrenceView em ",(0,o.jsx)(s.strong,{children:"uma \xfanica request"})," de inicializa\xe7\xe3o, eliminando duplicidades."]}),"\n",(0,o.jsxs)(s.li,{children:["Garantir que as informa\xe7\xf5es do usu\xe1rio logado (ex.: nome, ID) sejam obtidas a partir da rota ",(0,o.jsx)(s.code,{children:"/shared/possible-values"}),", conforme definido nas ocorr\xeancias anteriores."]}),"\n",(0,o.jsxs)(s.li,{children:["Revisar os servi\xe7os de sincroniza\xe7\xe3o (",(0,o.jsx)(s.code,{children:"incident_sync"}),", ",(0,o.jsx)(s.code,{children:"incident_type_sync"}),", etc.) para que sejam executados apenas quando realmente necess\xe1rios."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"45-ocorr\xeancia-5--requisi\xe7\xf5es-redundantes-na-occurrenceview",children:(0,o.jsx)(s.strong,{children:"4.5 Ocorr\xeancia 5 \u2013 Requisi\xe7\xf5es redundantes na OccurrenceView"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ",(0,o.jsx)(s.strong,{children:"OccurrenceView"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Durante a renderiza\xe7\xe3o e navega\xe7\xe3o dentro da p\xe1gina ",(0,o.jsx)(s.strong,{children:"OccurrenceView"}),", foram identificadas diversas requisi\xe7\xf5es executadas de forma redundante.",(0,o.jsx)(s.br,{}),"\n","Todas as requests s\xe3o disparadas assim que a p\xe1gina \xe9 carregada e tamb\xe9m ",(0,o.jsx)(s.strong,{children:"sempre que o usu\xe1rio alterna entre os formul\xe1rios internos"})," (ex.: ",(0,o.jsx)(s.strong,{children:"Dados B\xe1sicos"}),", ",(0,o.jsx)(s.strong,{children:"Ocorr\xeancia"}),", ",(0,o.jsx)(s.strong,{children:"Paciente"}),", ",(0,o.jsx)(s.strong,{children:"Regula\xe7\xe3o"})," e ",(0,o.jsx)(s.strong,{children:"Conclus\xe3o"}),")."]}),"\n",(0,o.jsxs)(s.p,{children:["A an\xe1lise de rede mostra repeti\xe7\xe3o de chamadas para as mesmas rotas a cada troca de aba ou formul\xe1rio, conforme evidenciado na captura de rede. Esse comportamento gera ",(0,o.jsx)(s.strong,{children:"overfetch"}),", uso desnecess\xe1rio de banda e aumento no tempo de resposta da interface."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/tFvjaIzSoDukGvDo-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-14.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:"A imagem abaixo \xe9 referente as requisi\xe7\xf5es do fluxo de clicar em cada aba somente uma vez."}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/QRStDPnUoiGhr3W1-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-15.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Execu\xe7\xe3o repetida de m\xfaltiplas requisi\xe7\xf5es mesmo em fluxo de navega\xe7\xe3o simples."}),"\n",(0,o.jsx)(s.li,{children:"Falta de cache e de reaproveitamento de dados entre as abas."}),"\n",(0,o.jsx)(s.li,{children:"Requisi\xe7\xf5es desnecess\xe1rias para informa\xe7\xf5es j\xe1 carregadas (usu\xe1rio logado e dados de incidente)."}),"\n",(0,o.jsx)(s.li,{children:"Impacto direto na performance e tempo de carregamento das se\xe7\xf5es."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Consolidar todas as informa\xe7\xf5es necess\xe1rias da ",(0,o.jsx)(s.strong,{children:"OccurrenceView"})," em ",(0,o.jsx)(s.strong,{children:"uma \xfanica requisi\xe7\xe3o de inicializa\xe7\xe3o"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"46-unit-selection",children:(0,o.jsx)(s.strong,{children:"4.6 unit-selection"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ",(0,o.jsx)(s.strong,{children:"UnitSelection"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Na tela ",(0,o.jsx)(s.strong,{children:"UnitSelection"}),", foi identificado que as fun\xe7\xf5es ",(0,o.jsx)(s.strong,{children:"onMounted"})," e ",(0,o.jsx)(s.strong,{children:"fetchData"})," (chamada dentro do ",(0,o.jsx)(s.strong,{children:"watch"}),") executam as mesmas requisi\xe7\xf5es de forma redundante.",(0,o.jsx)(s.br,{}),"\n","Isso faz com que, ao montar o componente e sempre que o ",(0,o.jsx)(s.strong,{children:"watch"})," \xe9 acionado, os mesmos dados sejam buscados novamente, gerando ",(0,o.jsx)(s.strong,{children:"requisi\xe7\xf5es duplicadas"})," e consumo desnecess\xe1rio de rede."]}),"\n",(0,o.jsxs)(s.p,{children:["Esse comportamento \xe9 recorrente ao entrar na p\xe1gina e tamb\xe9m ao alterar par\xe2metros observados pelo ",(0,o.jsx)(s.strong,{children:"watch"}),", mesmo quando as informa\xe7\xf5es j\xe1 foram previamente carregadas."]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/PPkTbfSqTjIVPhqM-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-16.png",alt:"image.png"})}),(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/r1xiKaRXwVN9af7C-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-17.png",alt:"image.png"})})]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/oAzftgBM6sbbuk7M-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-18.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Execu\xe7\xe3o de duas requisi\xe7\xf5es id\xeanticas (em ",(0,o.jsx)(s.strong,{children:"onMounted"})," e ",(0,o.jsx)(s.strong,{children:"watch"}),")."]}),"\n",(0,o.jsx)(s.li,{children:"Falta de controle para evitar chamadas repetidas."}),"\n",(0,o.jsx)(s.li,{children:"Impacto negativo no desempenho e tempo de carregamento da tela."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Unificar a l\xf3gica de carregamento de dados, mantendo apenas uma das abordagens (",(0,o.jsx)(s.strong,{children:"onMounted"})," ",(0,o.jsx)(s.strong,{children:"ou"})," ",(0,o.jsx)(s.strong,{children:"watch"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:["Caso seja necess\xe1rio atualizar os dados dinamicamente via ",(0,o.jsx)(s.strong,{children:"watch"}),", remover a chamada redundante em ",(0,o.jsx)(s.strong,{children:"onMounted"}),", garantindo que apenas o ",(0,o.jsx)(s.strong,{children:"watch"})," seja respons\xe1vel pelo carregamento quando houver mudan\xe7a real de par\xe2metros."]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"47-ocorr\xeancia-7--requisi\xe7\xf5es-redundantes-na-unitselection",children:(0,o.jsx)(s.strong,{children:"4.7 Ocorr\xeancia 7 \u2013 Requisi\xe7\xf5es redundantes na UnitSelection"})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/hByFZcFQnusNIzwR-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-19.png",alt:"image.png"})})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ",(0,o.jsx)(s.strong,{children:"UnitSelection"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Durante o carregamento da p\xe1gina ",(0,o.jsx)(s.strong,{children:"UnitSelection"}),", s\xe3o realizadas tr\xeas requisi\xe7\xf5es para popular as informa\xe7\xf5es iniciais:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /technical-decision/incident/{id}"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /incident/{id}?include_history=false"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /mobile-unit-type"})}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["As duas primeiras rotas (",(0,o.jsx)(s.code,{children:"/technical-decision/incident/{id}"})," e ",(0,o.jsx)(s.code,{children:"/incident/{id}?include_history=false"}),") retornam dados sobre o mesmo incidente, resultando em ",(0,o.jsx)(s.strong,{children:"duplicidade de informa\xe7\xe3o"})," e ",(0,o.jsx)(s.strong,{children:"requisi\xe7\xf5es desnecess\xe1rias"}),".",(0,o.jsx)(s.br,{}),"\n","Essas chamadas poderiam ser consolidadas em uma \xfanica rota que trouxesse apenas os dados realmente necess\xe1rios para popular a tela, incluindo as informa\xe7\xf5es do paciente associadas ao ve\xedculo selecionado anteriormente."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Execu\xe7\xe3o de requisi\xe7\xf5es redundantes para o mesmo contexto de incidente."}),"\n",(0,o.jsx)(s.li,{children:"Uso ineficiente de rede e aumento do tempo de resposta."}),"\n",(0,o.jsx)(s.li,{children:"Dificuldade de manuten\xe7\xe3o devido \xe0 sobreposi\xe7\xe3o de dados entre endpoints diferentes."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Manter apenas ",(0,o.jsx)(s.strong,{children:"duas rotas essenciais"})," para a p\xe1gina:","\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"/mobile-unit-type"})," \u2013 para carregar os tipos de viatura dispon\xedveis."]}),"\n",(0,o.jsxs)(s.li,{children:["Uma nova rota unificada que retorne as informa\xe7\xf5es do paciente e do ve\xedculo associado ao incidente selecionado (substituindo as chamadas para ",(0,o.jsx)(s.code,{children:"/technical-decision/incident/{id}"})," e ",(0,o.jsx)(s.code,{children:"/incident/{id}?include_history=false"}),")."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.li,{children:"Ajustar o backend para retornar somente os campos realmente utilizados pela interface, evitando sobrecarga de dados."}),"\n",(0,o.jsx)(s.li,{children:"Atualizar o frontend para consumir exclusivamente essas duas rotas, removendo chamadas redundantes e simplificando o fluxo de inicializa\xe7\xe3o da tela."}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"48-ocorr\xeancia-8--falta-de-filtragem-de-tipos-de-viaturas-na-rota-mobile-unit-type",children:[(0,o.jsx)(s.strong,{children:"4.8 Ocorr\xeancia 8 \u2013 Falta de filtragem de tipos de viaturas na rota"})," ",(0,o.jsx)(s.code,{children:"/mobile-unit-type"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ",(0,o.jsx)(s.strong,{children:"UnitSelection"}),(0,o.jsx)(s.br,{}),"\n","Rota: ",(0,o.jsx)(s.code,{children:"GET /mobile-unit-type"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Atualmente, a rota ",(0,o.jsx)(s.strong,{children:"/mobile-unit-type"})," retorna todos os tipos de viaturas cadastrados no sistema, sem aplicar nenhum crit\xe9rio de filtragem quanto ao status (ativo/inativo).",(0,o.jsx)(s.br,{}),"\n","Esse comportamento faz com que ve\xedculos inativos tamb\xe9m sejam listados na tela ",(0,o.jsx)(s.strong,{children:"UnitSelection"}),", obrigando o front a realizar a filtragem."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Retorno de dados desnecess\xe1rios (viaturas inativas)."}),"\n",(0,o.jsx)(s.li,{children:"Aumento desnecess\xe1rio no volume de dados trafegados."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Adicionar uma ",(0,o.jsx)(s.strong,{children:"flag de filtragem"})," na rota ",(0,o.jsx)(s.code,{children:"/mobile-unit-type"})," para permitir o retorno apenas de tipos de ve\xedculos ativos (ex.: ",(0,o.jsx)(s.code,{children:"GET /mobile-unit-type?active=true"}),"). por padr\xe3o retorna todos para n\xe3o gerar problemas com as rotas do admin"]}),"\n",(0,o.jsx)(s.li,{children:"Garantir que o frontend consuma essa flag, exibindo exclusivamente os tipos de viaturas dispon\xedveis para uso operacional."}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"49-ocorr\xeancia-9--retorno-excessivo-e-falta-de-filtragem-nas-rotas-da-aba-conclus\xe3o",children:(0,o.jsx)(s.strong,{children:"4.9 Ocorr\xeancia 9 \u2013 Retorno excessivo e falta de filtragem nas rotas da aba Conclus\xe3o"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ",(0,o.jsx)(s.strong,{children:"OccurrenceView"})," \u2192 Aba ",(0,o.jsx)(s.strong,{children:"Conclus\xe3o"}),(0,o.jsx)(s.br,{}),"\n","Rotas envolvidas:"]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /technical-decision-action"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /intercurrence"})}),"\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.code,{children:"GET /health-unit"})}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Na aba ",(0,o.jsx)(s.strong,{children:"Conclus\xe3o"})," do formul\xe1rio, foram identificadas tr\xeas rotas com problemas relacionados \xe0 aus\xeancia de filtragem e volume excessivo de dados retornados."]}),"\n",(0,o.jsxs)(s.p,{children:["As rotas ",(0,o.jsx)(s.strong,{children:"/technical-decision-action"})," e ",(0,o.jsx)(s.strong,{children:"/intercurrence"})," est\xe3o retornando registros ",(0,o.jsx)(s.strong,{children:"exclu\xeddos ou inativos"}),", exigindo que o frontend realize a filtragem manual para ocult\xe1-los \u2014 comportamento que aumenta a complexidade da aplica\xe7\xe3o e o tempo de carregamento."]}),"\n",(0,o.jsxs)(s.p,{children:["J\xe1 a rota ",(0,o.jsx)(s.strong,{children:"/health-unit"})," retorna um ",(0,o.jsx)(s.strong,{children:"JSON com aproximadamente 7.458 objetos"}),", enviado integralmente a cada requisi\xe7\xe3o, apenas para popular o campo ",(0,o.jsx)(s.strong,{children:"\u201cDestino Paciente\u201d"}),". Esse volume \xe9 desnecess\xe1rio e causa lentid\xe3o percept\xedvel na renderiza\xe7\xe3o e busca."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Falta de filtragem de registros ativos nas rotas ",(0,o.jsx)(s.code,{children:"/technical-decision-action"})," e ",(0,o.jsx)(s.code,{children:"/intercurrence"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Retorno de dados massivo na rota ",(0,o.jsx)(s.code,{children:"/health-unit"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Processamento excessivo no frontend e impacto negativo no desempenho da aba Conclus\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Aplicar filtro diretamente no backend para que as rotas ",(0,o.jsx)(s.strong,{children:"/technical-decision-action"})," e ",(0,o.jsx)(s.strong,{children:"/intercurrence"})," retornem apenas registros ",(0,o.jsx)(s.strong,{children:"ativos"}),", eliminando a necessidade de filtragem no frontend."]}),"\n",(0,o.jsxs)(s.li,{children:["Alterar a rota ",(0,o.jsx)(s.strong,{children:"/health-unit"})," para funcionar com ",(0,o.jsx)(s.strong,{children:"busca din\xe2mica (lazy load)"}),", adotando a mesma l\xf3gica j\xe1 utilizada em outros campos de busca:","\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"O usu\xe1rio digita parte do nome;"}),"\n",(0,o.jsx)(s.li,{children:"A API retorna apenas as unidades que correspondem \xe0 concord\xe2ncia;"}),"\n",(0,o.jsxs)(s.li,{children:["O resultado deve ser limitado a ",(0,o.jsx)(s.strong,{children:"no m\xe1ximo 20 registros"})," por requisi\xe7\xe3o."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h3,{id:"5-ocorr\xeancias-identificadas-operador-de-frota",children:(0,o.jsx)(s.strong,{children:"5. Ocorr\xeancias Identificadas Operador de frota"})}),"\n",(0,o.jsxs)(s.p,{children:["Na ",(0,o.jsx)(s.strong,{children:"FleetOperations.vue"})," foram identificadas diversas requests durante a renderiza\xe7\xe3o, resultando em problemas de ",(0,o.jsx)(s.strong,{children:"overfetch"})," e ",(0,o.jsx)(s.strong,{children:"uso desnecess\xe1rio de rede"}),"."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/UrTj4b5qECfmTpHS-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-20.png",alt:"image.png"})})}),"\n",(0,o.jsxs)(s.p,{children:["Algumas dessas ocorr\xeancias j\xe1 haviam sido relatadas em outros m\xf3dulos, como ",(0,o.jsx)(s.strong,{children:"M\xe9dico Regulador"})," e ",(0,o.jsx)(s.strong,{children:"TARM"}),". Um exemplo s\xe3o as buscas nas rotas ",(0,o.jsx)(s.code,{children:"user"})," e ",(0,o.jsx)(s.code,{children:"possible-values"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["Vale destacar que a rota ",(0,o.jsx)(s.code,{children:"possible-values"})," est\xe1 sendo substitu\xedda pela ",(0,o.jsx)(s.code,{children:"shared/default-values"}),", que j\xe1 retorna os valores relacionados ao usu\xe1rio, evitando requisi\xe7\xf5es redundantes."]}),"\n",(0,o.jsx)(s.h4,{id:"51-ocorr\xeancia-1--requests-redundantes-ao-selecionar-a-mesma-ocorr\xeancia",children:(0,o.jsx)(s.strong,{children:"5.1 Ocorr\xeancia 1 \u2013 Requests redundantes ao selecionar a mesma ocorr\xeancia"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina FleetOperations.vue \u2192 Tabela de Ocorr\xeancias"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Ao selecionar uma ocorr\xeancia na tabela, \xe9 feita uma requisi\xe7\xe3o para a rota ",(0,o.jsx)(s.code,{children:"/incident/{id}?include_history=false"}),". No entanto, se a ",(0,o.jsx)(s.strong,{children:"mesma ocorr\xeancia for selecionada mais de uma vez"}),", novas requests continuam sendo disparadas, gerando ",(0,o.jsx)(s.strong,{children:"overfetch"})," e consumo desnecess\xe1rio de rede."]}),"\n",(0,o.jsxs)(s.p,{children:["Al\xe9m disso, atualmente a rota retorna um JSON completo com todos os detalhes da ocorr\xeancia, muitos dos quais n\xe3o s\xe3o necess\xe1rios para o ",(0,o.jsx)(s.strong,{children:"Operador de Frota"}),", resultando em carregamento e processamento excessivo no frontend."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/pGPeYFgADxvgP3lW-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-21.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Requests redundantes ao selecionar a mesma ocorr\xeancia mais de uma vez."}),"\n",(0,o.jsx)(s.li,{children:"Retorno de dados completo, incluindo informa\xe7\xf5es n\xe3o utilizadas pelo Operador de Frota."}),"\n",(0,o.jsx)(s.li,{children:"Processamento desnecess\xe1rio no frontend e impacto negativo no desempenho da tabela de ocorr\xeancias."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Implementar controle de sele\xe7\xe3o no frontend para que a mesma ocorr\xeancia n\xe3o dispare m\xfaltiplas requisi\xe7\xf5es."}),"\n",(0,o.jsxs)(s.li,{children:["Criar uma rota dedicada que retorne ",(0,o.jsx)(s.strong,{children:"apenas os dados b\xe1sicos necess\xe1rios"})," para o Operador de Frota, reduzindo o volume de dados transferidos e melhorando a performance."]}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"52-ocorr\xeancia-2---dados-do-campo-transferir-para",children:[(0,o.jsx)(s.strong,{children:"5.2 Ocorr\xeancia 2"})," ",(0,o.jsx)(s.strong,{children:"- Dados do campo \u201cTransferir para\u201d"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina FleetOperations.vue \u2192 Formul\xe1rio de Ocorr\xeancia \u2192 Campo \u201cTransferir para\u201d"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/C0ZLNj8wBsdbo8Ge-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-22.png",alt:"image.png"})})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Rotas envolvidas:"}),(0,o.jsx)(s.br,{}),"\n","GET /employee/search?query={termo}"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","O campo ",(0,o.jsx)(s.strong,{children:"\u201cTransferir para\u201d"})," atualmente busca dados na rota ",(0,o.jsx)(s.code,{children:"/possible-values"}),", que ",(0,o.jsx)(s.strong,{children:"n\xe3o retorna informa\xe7\xf5es corretas para este caso"}),". Existe uma rota espec\xedfica, ",(0,o.jsx)(s.code,{children:"/employee/search?query="}),", destinada a fornecer os dados corretos de funcion\xe1rios conforme o termo digitado pelo usu\xe1rio."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Dados incorretos sendo retornados pelo campo \u201cTransferir para\u201d."}),"\n",(0,o.jsxs)(s.li,{children:["Uso inadequado da rota ",(0,o.jsx)(s.code,{children:"/possible-values"})," para buscar informa\xe7\xf5es de funcion\xe1rios."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Alterar o campo \u201cTransferir para\u201d para consumir a rota ",(0,o.jsx)(s.code,{children:"/employee/search?query="}),", garantindo que apenas funcion\xe1rios correspondentes ao termo digitado sejam retornados."]}),"\n",(0,o.jsxs)(s.li,{children:["Implementar ",(0,o.jsx)(s.strong,{children:"lazy loading"})," para reduzir o volume de dados transferidos e otimizar a performance."]}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"53-ocorr\xeancia-3---pagina-fleet-occurrence",children:[(0,o.jsx)(s.strong,{children:"5.3 Ocorr\xeancia 3"})," ",(0,o.jsx)(s.strong,{children:"- Pagina fleet-occurrence"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Rotas envolvidas:"}),(0,o.jsx)(s.br,{}),"\n","GET /dispatch/bff/dispatch-data/{id}",(0,o.jsx)(s.br,{}),"\n","GET /incident/{id}?include_history=false",(0,o.jsx)(s.br,{}),"\n","GET /dispatch/incident/{id}"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Durante a renderiza\xe7\xe3o da p\xe1gina ",(0,o.jsx)(s.strong,{children:"FleetOccurrence"}),", foram identificadas diversas requisi\xe7\xf5es executadas para popular os dados da ocorr\xeancia. Algumas delas s\xe3o ",(0,o.jsx)(s.strong,{children:"repetidas"}),", resultando em sobrecarga de rede e processamento desnecess\xe1rio."]}),"\n",(0,o.jsxs)(s.p,{children:["O problema se agrava ao selecionar uma ocorr\xeancia que ",(0,o.jsx)(s.strong,{children:"j\xe1 possui ve\xedculo despachado"}),", pois o n\xfamero de requisi\xe7\xf5es duplicadas aumenta consideravelmente."]}),"\n",(0,o.jsxs)(s.p,{children:["Al\xe9m disso, ao ",(0,o.jsx)(s.strong,{children:"selecionar um checklist"}),", o mesmo comportamento se repete, indicando que h\xe1 ",(0,o.jsx)(s.strong,{children:"falta de controle na l\xf3gica de carregamento de dados"})," e aus\xeancia de reaproveitamento das informa\xe7\xf5es j\xe1 obtidas."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/tuImrPX15q5ImKkP-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-23.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Execu\xe7\xe3o de m\xfaltiplas requisi\xe7\xf5es redundantes para a mesma ocorr\xeancia."}),"\n",(0,o.jsx)(s.li,{children:"Aumento do n\xfamero de requests em ocorr\xeancias com ve\xedculo despachado."}),"\n",(0,o.jsx)(s.li,{children:"Requisi\xe7\xf5es repetidas tamb\xe9m ao selecionar checklists."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Criar uma ",(0,o.jsx)(s.strong,{children:"rota unificada"})," para retornar todos os dados necess\xe1rios \xe0 p\xe1gina ",(0,o.jsx)(s.strong,{children:"FleetOccurrence"}),", eliminando a necessidade de m\xfaltiplas chamadas."]}),"\n",(0,o.jsxs)(s.li,{children:["Revisar a ",(0,o.jsx)(s.strong,{children:"l\xf3gica de carregamento e renderiza\xe7\xe3o"})," para evitar requisi\xe7\xf5es repetidas, especialmente ao selecionar ocorr\xeancias j\xe1 carregadas ou clicar em um checklists."]}),"\n",(0,o.jsxs)(s.li,{children:["Avaliar a consolida\xe7\xe3o das rotas ",(0,o.jsx)(s.code,{children:"/dispatch/bff/dispatch-data/{id}"})," e ",(0,o.jsx)(s.code,{children:"/dispatch/incident/{id}"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"54-ocorr\xeancia-4---falta-de-filtragem-e-uso-de-rotas-redundantes-na-p\xe1gina-managefleet",children:[(0,o.jsx)(s.strong,{children:"5.4 Ocorr\xeancia 4"})," ",(0,o.jsx)(s.strong,{children:"- Falta de filtragem e uso de rotas redundantes na p\xe1gina ManageFleet"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina ManageFleet.vue"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Rotas envolvidas:"}),(0,o.jsx)(s.br,{}),"\n","GET /mobile-unit-type",(0,o.jsx)(s.br,{}),"\n","GET /mobile-unit-type?active=true",(0,o.jsx)(s.br,{}),"\n","GET /mobile-unit?active_only=true",(0,o.jsx)(s.br,{}),"\n","GET /mobile-unit"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Na p\xe1gina ",(0,o.jsx)(s.strong,{children:"ManageFleet"}),", foram identificados problemas relacionados \xe0 aus\xeancia de filtragem no backend e ao uso de rotas redundantes para carregar informa\xe7\xf5es sobre ",(0,o.jsx)(s.strong,{children:"unidades m\xf3veis"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["A rota ",(0,o.jsx)(s.code,{children:"/mobile-unit-type"})," atualmente retorna ",(0,o.jsx)(s.strong,{children:"todos os tipos de unidade m\xf3vel"}),", e o frontend realiza a filtragem manual para exibir apenas os ativos. Esse comportamento deveria ser tratado diretamente no backend, por meio de um par\xe2metro, conforme j\xe1 implementado em outras rotas:"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/Gas4nomlBzJUlFaw-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-24.png",alt:"image.png"})})}),"\n",(0,o.jsx)(s.p,{children:"Al\xe9m disso, foram identificadas duas rotas distintas para obten\xe7\xe3o de unidades m\xf3veis"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.a,{href:"https://e-sus-urgencias-api.digitalsysdev.com.br/mobile-unit?active%5C_only=true",children:"https://e-sus-urgencias-api.digitalsysdev.com.br/mobile-unit?active\\_only=true"})})}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.a,{href:"https://e-sus-urgencias-api.digitalsysdev.com.br/mobile-unit",children:"https://e-sus-urgencias-api.digitalsysdev.com.br/mobile-unit"})})}),"\n",(0,o.jsx)(s.p,{children:"Atualmente ambas s\xe3o utilizadas, sendo que apenas uma deveria ser suficiente."}),"\n",(0,o.jsxs)(s.p,{children:["Outro ponto observado \xe9 o uso de uma rota que retorna um ",(0,o.jsx)(s.strong,{children:"objeto extenso com diversos dados desnecess\xe1rios"})," apenas para popular o campo de sele\xe7\xe3o ",(0,o.jsx)(s.strong,{children:"\u201cSelecione uma unidade m\xf3vel\u201d"}),". Para esse caso, seria suficiente retornar apenas os campos ",(0,o.jsx)(s.strong,{children:"id"})," e ",(0,o.jsx)(s.strong,{children:"nome"}),", evitando tr\xe1fego e processamento excessivo."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Falta de filtragem no backend da rota ",(0,o.jsx)(s.code,{children:"/mobile-unit-type"}),", obrigando o frontend a tratar registros inativos."]}),"\n",(0,o.jsxs)(s.li,{children:["Uso redundante das rotas ",(0,o.jsx)(s.code,{children:"/mobile-unit"})," e ",(0,o.jsx)(s.code,{children:"/mobile-unit?active_only=true"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Carregamento excessivo de dados para popular campos simples de sele\xe7\xe3o."}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Ajustar a rota ",(0,o.jsx)(s.code,{children:"/mobile-unit-type"})," para suportar o par\xe2metro ",(0,o.jsx)(s.code,{children:"?active=true"}),", retornando apenas registros ativos."]}),"\n",(0,o.jsxs)(s.li,{children:["Consolidar o uso de uma \xfanica rota para listagem de unidades m\xf3veis, preferencialmente ",(0,o.jsx)(s.code,{children:"/mobile-unit?active_only=true"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Criar uma rota espec\xedfica e otimizada para o select ",(0,o.jsx)(s.strong,{children:"\u201cSelecione uma unidade m\xf3vel\u201d"}),", retornando apenas ",(0,o.jsx)(s.code,{children:"o necessario"}),"."]}),"\n",(0,o.jsx)(s.li,{children:"Eliminar filtragens e tratamentos redundantes no frontend, reduzindo o n\xfamero de requests e o volume de dados processados."}),"\n"]}),"\n",(0,o.jsxs)(s.h4,{id:"55-ocorr\xeancia-5---falta-de-filtragem-e-repeti\xe7\xe3o-de-requisi\xe7\xf5es-na-p\xe1gina-team",children:[(0,o.jsx)(s.strong,{children:"5.5 Ocorr\xeancia 5"})," ",(0,o.jsx)(s.strong,{children:"- Falta de filtragem e repeti\xe7\xe3o de requisi\xe7\xf5es na p\xe1gina Team"})]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Local:"}),(0,o.jsx)(s.br,{}),"\n","Componente/p\xe1gina Team.vue"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"Rotas envolvidas:"}),(0,o.jsx)(s.br,{}),"\n","GET /professional-type",(0,o.jsx)(s.br,{}),"\n","GET /user",(0,o.jsx)(s.br,{}),"\n","GET /unallocated",(0,o.jsx)(s.br,{}),"\n","GET /unallocated?page={n}&page_size={n}",(0,o.jsx)(s.br,{}),"\n","GET /unallocated?include_self={true|false}"]}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"https://ajuda.digitalsys.com.br/uploads/images/gallery/2025-10/iJ4UDlsvLUdOPUWx-image.png",children:(0,o.jsx)(s.img,{src:"/docs-preview/img/plano-de-refatoracao-overfetch-underfetch-e-boas-praticas-em-requests-25.png",alt:"image.png"})}),(0,o.jsx)(s.strong,{children:"Descri\xe7\xe3o:"}),(0,o.jsx)(s.br,{}),"\n","Na p\xe1gina ",(0,o.jsx)(s.strong,{children:"Team"}),", foram identificadas falhas relacionadas \xe0 aus\xeancia de filtragem no backend e \xe0 repeti\xe7\xe3o de requisi\xe7\xf5es para as rotas de ",(0,o.jsx)(s.strong,{children:"unallocated"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["A rota ",(0,o.jsx)(s.code,{children:"/professional-type"})," atualmente retorna todos os tipos de profissionais, e o frontend realiza a filtragem manual para exibir apenas os ativos. Esse comportamento deve ser tratado diretamente no backend, utilizando o par\xe2metro ",(0,o.jsx)(s.code,{children:"?active_only=true"}),", conforme j\xe1 adotado em outras rotas."]}),"\n",(0,o.jsxs)(s.p,{children:["Al\xe9m disso, a rota ",(0,o.jsx)(s.code,{children:"/user"})," (getUser) est\xe1 sendo chamada sem necessidade (\xe9 possivel adaptar a logica sem a utiliza\xe7\xe3o dessa rota) e deve ser removida da p\xe1gina."]}),"\n",(0,o.jsxs)(s.p,{children:["Tamb\xe9m foi observada ",(0,o.jsx)(s.strong,{children:"repeti\xe7\xe3o de chamadas"})," nas rotas ",(0,o.jsx)(s.code,{children:"/unallocated"}),", inclusive com varia\xe7\xf5es de par\xe2metros (",(0,o.jsx)(s.code,{children:"page"}),", ",(0,o.jsx)(s.code,{children:"include_self"}),"), gerando m\xfaltiplas requisi\xe7\xf5es redundantes para obter os mesmos dados."]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Problema:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Falta de filtragem de registros ativos na rota ",(0,o.jsx)(s.code,{children:"/professional-type"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Uso desnecess\xe1rio da rota ",(0,o.jsx)(s.code,{children:"/user"})," (getUser)."]}),"\n",(0,o.jsxs)(s.li,{children:["Requisi\xe7\xf5es duplicadas e redundantes nas rotas ",(0,o.jsx)(s.code,{children:"/unallocated"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.strong,{children:"Solu\xe7\xe3o proposta:"})}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["Ajustar a rota ",(0,o.jsx)(s.code,{children:"/professional-type"})," para suportar o par\xe2metro ",(0,o.jsx)(s.code,{children:"?active_only=true"}),", eliminando a necessidade de filtragem no frontend."]}),"\n",(0,o.jsxs)(s.li,{children:["Remover a chamada da rota ",(0,o.jsx)(s.code,{children:"/user"})," (getUser) da p\xe1gina."]}),"\n",(0,o.jsxs)(s.li,{children:["Revisar a l\xf3gica de carregamento das rotas ",(0,o.jsx)(s.code,{children:"/unallocated"})," para evitar repeti\xe7\xf5es desnecess\xe1rias"]}),"\n",(0,o.jsxs)(s.li,{children:["Consolidar as chamadas de ",(0,o.jsx)(s.code,{children:"/unallocated"})," em uma \xfanica requisi\xe7\xe3o otimizada, garantindo efici\xeancia e consist\xeancia dos dados."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453(e,s,r){r.d(s,{R:()=>i,x:()=>d});var n=r(6540);const o={},a=n.createContext(o);function i(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:s},e.children)}}}]);